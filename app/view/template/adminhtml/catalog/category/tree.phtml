<div id="tree-div"></div>
<script type="text/javascript">
var rootNodeText = '<?=__("Application Root")?>';
Ext.onReady(function(){
    var tree = new Ext.tree.TreePanel('tree-div', {
        animate:true, 
        loader: new Ext.tree.TreeLoader({dataUrl:'<?=$this->getNodesUrl()?>'}),
        enableDD:true,
        containerScroll: true
    });

    // set the root node
    var root = new Ext.tree.AsyncTreeNode({
        text: rootNodeText,
        draggable:false,
        id:'1'
    });
    tree.setRootNode(root);
    
    // set handlers
    tree.addListener('click', categoryClick.createDelegate(this));
    
    // render the tree
    tree.render();
    root.expand();
});

categoryClick = function(node, e){
    location.href = '<?=$this->getEditUrl()?>'+'id/'+node.id+'/';
};
</script>
