<div class="head">
    <table cellspacing="0"> 
        <tr>
            <td style="width:30%;"><h2><?=$this->getHeader()?></h2></td>
            <td class="buttons">
                <strong class="button" id="add_address_button"><span><a href="#" id="add_new_address_button"><?=__('add new customer address')?></a></span></strong>
                <strong class="button"><span><a href="#" onclick="customerForm.submit();return false;"><?=__('save customer')?></a></span></strong>
                <?if($this->getCustomerId()):?>
                <strong class="button"><span><a href="#" onclick="customerDelete();return false;"><?=__('delete customer')?></a></span></strong>
                <?endif;?>
            </td>
        </tr>
    </table>
</div>
<form action="<?=$this->getSaveUrl()?>" method="POST" id="customer_edit_form">
</form>
<script type="text/javascript" language="javascript">
    var customerForm = new varienForm('customer_edit_form');
    
    function customerEditShowButtons(data){
        customerForm.initFormElements();
        if(data.tab.id && data.tab.id=='customer_info_tabs_addresses'){
            Element.show($('add_address_button'));
        }
    }
    
    function customerEditHideButtons(data){
        if(data.tab && data.tab.id=='customer_info_tabs_addresses'){
            Element.hide($('add_address_button'));
        }
    }
    
    function customerDelete(){
        if(confirm('<?=__('are you sure?')?>')){
            location.href = '<?=$this->getDeleteUrl()?>'
        }
    }
    
    varienGlobalEvents.attachEventHandler('showTab', customerEditShowButtons);
    varienGlobalEvents.attachEventHandler('hideTab', customerEditHideButtons);
</script>