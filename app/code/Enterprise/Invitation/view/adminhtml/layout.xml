<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     default_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<layout version="0.1.0">
    <adminhtml_invitation_index>
        <update  handle="formkey"/>
        <update handle="adminhtml_invitation_block"/>
        <reference name="content">
            <block name="invitation_grid_container" type="Enterprise_Invitation_Block_Adminhtml_Invitation" />
        </reference>
    </adminhtml_invitation_index>

    <adminhtml_invitation_block>
        <reference name='invitation_grid_container'>
            <block type="Mage_Backend_Block_Widget_Grid" name='invitation.grid.grid' as='grid'>
                <arguments>
                    <id>invitationGrid</id>
                    <dataSource type="object">Enterprise_Invitation_Model_Resource_Invitation_Grid_Collection</dataSource>
                    <default_sort>date</default_sort>
                    <default_dir>DESC</default_dir>
                    <save_parameters_in_session>1</save_parameters_in_session>
                </arguments>
                <block type="Mage_Backend_Block_Widget_Grid_Massaction" name="adminhtml.block.invitation.massactions" as="grid.massaction">
                    <arguments>
                        <massaction_id_field>invitation_id</massaction_id_field>
                        <form_field_name>invitations</form_field_name>
                        <use_select_all>1</use_select_all>
                        <options>
                            <cancel>
                                <label translate="true" module="Enterprise_Invitation">Discard Selected</label>
                                <url>*/*/massCancel</url>
                                <confirm translate="true" module="Enterprise_Invitation">Are you sure you want to do this?</confirm>
                            </cancel>
                            <resend>
                                <label translate="true" module="Enterprise_Invitation">Send Selected</label>
                                <url>*/*/massResend</url>
                            </resend>
                        </options>
                    </arguments>
                </block>
                <block type='Mage_Backend_Block_Widget_Grid_ColumnSet' name='adminhtml.catalog.product.set.grid.columnSet' as='grid.columnSet'>
                    <arguments>
                        <id>tax_rate_grid</id>
                        <rowUrl>
                            <path>*/*/view</path>
                            <extraParamsTemplate>
                                <id>getId</id>
                            </extraParamsTemplate>
                        </rowUrl>
                    </arguments>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='enterprise_invitation_id'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>ID</header>
                            <width>80</width>
                            <align>right</align>
                            <type>text</type>
                            <index>invitation_id</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='email'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Email</header>
                            <type>text</type>
                            <index>invitation_email</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='invitee'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Invitee</header>
                            <type>text</type>
                            <index>invitee_email</index>
                            <renderer>Enterprise_Invitation_Block_Adminhtml_Invitation_Grid_Column_Invitee</renderer>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='invitation_date'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Sent</header>
                            <type>datetime</type>
                            <gmtoffset>1</gmtoffset>
                            <width>170</width>
                            <index>invitation_date</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='signup_date'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Registered</header>
                            <type>datetime</type>
                            <gmtoffset>1</gmtoffset>
                            <width>150</width>
                            <index>signup_date</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='status'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Status</header>
                            <type>options</type>
                            <width>140</width>
                            <index>status</index>
                            <options type='options'>Enterprise_Invitation_Model_Source_Invitation_Options</options>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='website_id'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Valid Website</header>
                            <type>options</type>
                            <width>150</width>
                            <index>website_id</index>
                            <options type='options'>Enterprise_Invitation_Model_Source_Invitation_WebsiteId</options>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='group_id'>
                        <arguments>
                            <header translate='true' module='Enterprise_Invitation'>Invitee Group</header>
                            <type>options</type>
                            <width>140</width>
                            <index>group_id</index>
                            <filter_index>invitee_group_id</filter_index>
                            <options type='options'>Enterprise_Invitation_Model_Source_Invitation_GroupId</options>
                        </arguments>
                    </block>
                </block>
            </block>
        </reference>
    </adminhtml_invitation_block>

    <adminhtml_invitation_view>
        <reference name="content">
            <block name="invitation_view_page" type="Enterprise_Invitation_Block_Adminhtml_Invitation_View" template="view.phtml">
                
            </block>
        </reference>
        <reference name="left">
            <block name="invitation_view_tabs" as="tabs" type="Enterprise_Invitation_Block_Adminhtml_Invitation_View_Tabs">
                <action method="addTab"><tab>general</tab><content>Enterprise_Invitation_Block_Adminhtml_Invitation_View_Tab_General</content></action>
                <action method="addTab"><tab>history</tab><content>Enterprise_Invitation_Block_Adminhtml_Invitation_View_Tab_History</content></action>
                <action method="setDestElementId"><id>invitation-elements</id></action>
            </block>
        </reference>
    </adminhtml_invitation_view>

    <adminhtml_invitation_new>
        <reference name="content">
            <block name="invitation_add_page" type="Enterprise_Invitation_Block_Adminhtml_Invitation_Add" />
        </reference>
    </adminhtml_invitation_new>

    <adminhtml_report_invitation_order_grid>
        <update handle="adminhtml_report_grid" />
        <reference name="adminhtml.report.grid">
            <arguments>
                <id>invitation_order_grid</id>
                <dataSource type="object">Enterprise_Invitation_Model_Resource_Report_Invitation_Order_Initial_Collection</dataSource>
            </arguments>
        </reference>
        <reference name="adminhtml.report.grid.export">
            <arguments>
                <exportTypes>
                    <csv>
                        <urlPath>*/*/exportOrderCsv</urlPath>
                    </csv>
                    <excel>
                        <urlPath>*/*/exportOrderExcel</urlPath>
                    </excel>
                </exportTypes>
            </arguments>
        </reference>
        <reference name="adminhtml.report.grid.columnSet">
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="sent">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Invitations Sent</header>
                    <type>number</type>
                    <index>sent</index>
                    <id>sent</id>
                    <header_css_class>col-inv-sent</header_css_class>
                    <column_css_class>col-inv-sent</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="accepted">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Invitations Accepted</header>
                    <type>number</type>
                    <index>accepted</index>
                    <id>accepted</id>
                    <header_css_class>col-inv-acc</header_css_class>
                    <column_css_class>col-inv-acc</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="purchased">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Accepted and Purchased</header>
                    <type>number</type>
                    <index>purchased</index>
                    <id>purchased</id>
                    <header_css_class>col-acc</header_css_class>
                    <column_css_class>col-acc</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="purchased_rate">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Conversion Rate</header>
                    <renderer>Enterprise_Invitation_Block_Adminhtml_Grid_Column_Renderer_Percent</renderer>
                    <type>string</type>
                    <index>purchased_rate</index>
                    <id>purchased_rate</id>
                    <header_css_class>col-rate</header_css_class>
                    <column_css_class>col-rate</column_css_class>
                </arguments>
            </block>
        </reference>
    </adminhtml_report_invitation_order_grid>

    <adminhtml_report_invitation_exportorderexcel>
        <update handle="adminhtml_report_invitation_order_grid"/>
        <container name="adminhtml.report.grid.container" label="Report Invitation Order Container"/>
    </adminhtml_report_invitation_exportorderexcel>

    <adminhtml_report_invitation_exportordercsv>
        <update handle="adminhtml_report_invitation_order_grid"/>
        <container name="adminhtml.report.grid.container" label="Report Invitation Order Container"/>
    </adminhtml_report_invitation_exportordercsv>

    <adminhtml_report_invitation_order>
        <update handle="adminhtml_report_invitation_order_grid" />
        <reference name="content">
            <block name='adminhtml.report.grid.container' type="Enterprise_Invitation_Block_Adminhtml_Report_Invitation_Order" />
        </reference>
    </adminhtml_report_invitation_order>

    <adminhtml_report_invitation_customer_grid>
        <update handle="adminhtml_report_grid" />
        <reference name="adminhtml.report.grid">
            <arguments>
                <id>report_invitation_customer</id>
                <dataSource type="object">Enterprise_Invitation_Model_Resource_Report_Invitation_Customer_Collection_Initial</dataSource>
            </arguments>
        </reference>
        <reference name="adminhtml.report.grid.export">
            <arguments>
                <exportTypes>
                    <csv>
                        <urlPath>*/*/exportCustomerCsv</urlPath>
                    </csv>
                    <excel>
                        <urlPath>*/*/exportCustomerExcel</urlPath>
                    </excel>
                </exportTypes>
            </arguments>
        </reference>
        <reference name="adminhtml.report.grid.columnSet">
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="id">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">ID</header>
                    <type>number</type>
                    <index>entity_id</index>
                    <id>id</id>
                    <header_css_class>col-id</header_css_class>
                    <column_css_class>col-id</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="name">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Name</header>
                    <type>text</type>
                    <index>name</index>
                    <id>name</id>
                    <header_css_class>col-name</header_css_class>
                    <column_css_class>col-name</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="email">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Email</header>
                    <index>email</index>
                    <id>email</id>
                    <header_css_class>col-email</header_css_class>
                    <column_css_class>col-email</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="group">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Group</header>
                    <index>group_name</index>
                    <id>group</id>
                    <header_css_class>col-group</header_css_class>
                    <column_css_class>col-group</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="sent">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Invitations Sent</header>
                    <index>sent</index>
                    <type>number</type>
                    <id>sent</id>
                    <header_css_class>col-inv-sent</header_css_class>
                    <column_css_class>col-inv-sent</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="accepted">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Invitations Accepted</header>
                    <index>accepted</index>
                    <type>number</type>
                    <id>accepted</id>
                    <header_css_class>col-inv-acc</header_css_class>
                    <column_css_class>col-inv-acc</column_css_class>
                </arguments>
            </block>
        </reference>
    </adminhtml_report_invitation_customer_grid>

    <adminhtml_report_invitation_customer>
        <update handle="adminhtml_report_invitation_customer_grid" />
        <reference name="content">
            <block name="adminhtml.report.grid.container" type="Enterprise_Invitation_Block_Adminhtml_Report_Invitation_Customer" />
        </reference>
    </adminhtml_report_invitation_customer>

    <adminhtml_report_invitation_exportcustomerexcel>
        <update handle="adminhtml_report_invitation_customer_grid" />
        <container name="adminhtml.report.grid.container" label='Report Invitations Customer Container'/>
    </adminhtml_report_invitation_exportcustomerexcel>

    <adminhtml_report_invitation_exportcustomercsv>
        <update handle="adminhtml_report_invitation_customer_grid" />
        <container name="adminhtml.report.grid.container" label='Report Invitations Customer Container'/>
    </adminhtml_report_invitation_exportcustomercsv>

    <adminhtml_report_invitation_grid>
        <update handle="adminhtml_report_grid" />
        <reference name="adminhtml.report.grid">
            <arguments>
                <id>report_invitation_general</id>
                <dataSource type="object">Enterprise_Invitation_Model_Resource_Report_Invitation_Collection_Initial</dataSource>
            </arguments>
        </reference>
        <reference name="adminhtml.report.grid.columnSet">
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="sent">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Sent</header>
                    <type>number</type>
                    <index>sent</index>
                    <id>sent</id>
                    <header_css_class>col-inv-sent</header_css_class>
                    <column_css_class>col-inv-sent</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="accepted">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Accepted</header>
                    <type>number</type>
                    <index>accepted</index>
                    <id>accepted</id>
                    <header_css_class>col-inv-acc</header_css_class>
                    <column_css_class>col-inv-acc</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="canceled">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Discarded</header>
                    <type>number</type>
                    <index>canceled</index>
                    <id>canceled</id>
                    <header_css_class>col-inv-disc</header_css_class>
                    <column_css_class>col-inv-disc</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="accepted_rate">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Accept Rate</header>
                    <type>string</type>
                    <index>accepted_rate</index>
                    <id>accepted_rated</id>
                    <width>170</width>
                    <renderer>Enterprise_Invitation_Block_Adminhtml_Grid_Column_Renderer_Percent</renderer>
                    <header_css_class>col-inv-acc-rate</header_css_class>
                    <column_css_class>col-inv-acc-rate</column_css_class>
                </arguments>
            </block>
            <block type="Mage_Backend_Block_Widget_Grid_Column" as="canceled_rate">
                <arguments>
                    <header translate="true" module="Enterprise_Invitation">Discard Rate</header>
                    <type>number</type>
                    <index>canceled_rate</index>
                    <id>canceled_rate</id>
                    <width>170</width>
                    <renderer>Enterprise_Invitation_Block_Adminhtml_Grid_Column_Renderer_Percent</renderer>
                    <header_css_class>col-inv-disc-rate</header_css_class>
                    <column_css_class>col-inv-disc-rate</column_css_class>
                </arguments>
            </block>
        </reference>
    </adminhtml_report_invitation_grid>

    <adminhtml_report_invitation_index>
        <update handle="adminhtml_report_invitation_grid" />
        <reference name="content">
            <block name="adminhtml.report.grid.container" type="Enterprise_Invitation_Block_Adminhtml_Report_Invitation_General" />
        </reference>
    </adminhtml_report_invitation_index>

    <adminhtml_report_invitation_exportexcel>
        <update handle="adminhtml_report_invitation_grid" />
        <container name="adminhtml.report.grid.container" label='Report Invitations General Container'/>
    </adminhtml_report_invitation_exportexcel>

    <adminhtml_report_invitation_exportcsv>
        <update handle="adminhtml_report_invitation_grid" />
        <container name="adminhtml.report.grid.container" label='Report Invitations General Container'/>
    </adminhtml_report_invitation_exportcsv>
</layout>
