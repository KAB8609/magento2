<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    Enterprise
 * @package     Enterprise_Tag
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<config>
    <frontend>
        <events>
            <controller_action_predispatch_magento_reward_customer_info>
                <observers>
                    <add_reward_action>
                        <class>Enterprise_Tag_Model_Observer</class>
                        <method>addActionClassToRewardModel</method>
                    </add_reward_action>
                </observers>
            </controller_action_predispatch_magento_reward_customer_info>
        </events>
    </frontend>
    <adminhtml>
        <cache>
            <dependency>
                <change>
                    <tag>Magento_Tag_Model_Tag</tag>
                </change>
                <delete>
                    <tag>Magento_Tag_Model_Tag</tag>
                </delete>
            </dependency>
        </cache>
        <events>
            <tag_save_commit_after>
                <observers>
                    <update_reward_points>
                        <class>Enterprise_Tag_Model_Observer</class>
                        <method>updateRewardPointsWhenTagSubmit</method>
                    </update_reward_points>
                </observers>
            </tag_save_commit_after>
            <controller_action_predispatch_adminhtml_customer_reward_history>
                <observers>
                    <add_reward_action>
                        <class>Enterprise_Tag_Model_Observer</class>
                        <method>addActionClassToRewardModel</method>
                    </add_reward_action>
                </observers>
            </controller_action_predispatch_adminhtml_customer_reward_history>
            <controller_action_predispatch_adminhtml_customer_reward_historyGrid>
                <observers>
                    <add_reward_action>
                        <class>Enterprise_Tag_Model_Observer</class>
                        <method>addActionClassToRewardModel</method>
                    </add_reward_action>
                </observers>
            </controller_action_predispatch_adminhtml_customer_reward_historyGrid>
        </events>
        <enterprise>
            <admingws>
                <collection_load_before>
                    <magento_tag_model_resource_reports_product_collection>addStoreFilter</magento_tag_model_resource_reports_product_collection>
                    <magento_tag_model_resource_reports_customer_collection>addStoreFilter</magento_tag_model_resource_reports_customer_collection>
                </collection_load_before>
                <model_save_before>
                    <magento_tag_model_tag>Enterprise_Tag_Model_AdminGws_Models::tagSaveBefore</magento_tag_model_tag>
                </model_save_before>
                <model_delete_before>
                    <magento_tag_model_tag>Enterprise_Tag_Model_AdminGws_Models::tagDeleteBefore</magento_tag_model_tag>
                </model_delete_before>
                <block_html_before>
                    <magento_tag_block_adminhtml_tag_grid>Enterprise_Tag_Model_AdminGws_Blocks::removeTagGridActions</magento_tag_block_adminhtml_tag_grid>
                    <magento_tag_block_adminhtml_edit>Enterprise_Tag_Model_AdminGws_Blocks::removeTagButtons</magento_tag_block_adminhtml_edit>
                    <magento_tag_block_adminhtml_edit_form>Enterprise_Tag_Model_AdminGws_Blocks::disableTagEditFormFields</magento_tag_block_adminhtml_edit_form>
                </block_html_before>
            </admingws>
        </enterprise>
    </adminhtml>
    <crontab>
        <jobs>
            <magento_reward_balance_warning_notification>
                <run>
                    <model>Enterprise_Tag_Model_Reward_Observer::scheduledBalanceExpireNotification</model>
                </run>
            </magento_reward_balance_warning_notification>
        </jobs>
    </crontab>
</config>
