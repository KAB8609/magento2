<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<layout version="0.1.0">
    <customer_account>
        <block type="Enterprise_Reward_Block_Customer_Account" name="enterprise.reward.customer.account" />
    </customer_account>

    <enterprise_reward_customer_info translate="label" type="page" parent="customer_account">
        <label>Customer Reward Info</label>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Enterprise_Reward_Block_Customer_Reward" name="customer.reward" template="customer/reward.phtml">
                <block type="Enterprise_Reward_Block_Customer_Reward_Info" name="customer.reward.info" template="customer/reward/info.phtml"/>
                <block type="Enterprise_Reward_Block_Customer_Reward_History" name="customer.reward.history" template="customer/reward/history.phtml"/>
                <block type="Enterprise_Reward_Block_Customer_Reward_Subscription" name="customer.reward.subscription" template="customer/reward/subscription.phtml"/>
            </block>
        </reference>
    </enterprise_reward_customer_info>

    <checkout_onepage_index>
        <reference name="checkout.onepage.payment.methods_additional">
            <block type="Enterprise_Reward_Block_Checkout_Payment_Additional" template="checkout/onepage/payment/additional.phtml" name="reward.points" before="-"/>
        </reference>
    </checkout_onepage_index>

    <checkout_onepage_paymentmethod>
        <reference name="checkout.onepage.payment.methods.scripts">
            <block type="Enterprise_Reward_Block_Checkout_Payment_Additional" template="checkout/onepage/payment/scripts.phtml" name="reward.scripts" after="-" />
        </reference>
    </checkout_onepage_paymentmethod>
    
    <checkout_multishipping_billing>
        <reference name="payment_methods_before">
            <block type="Enterprise_Reward_Block_Checkout_Payment_Additional" template="checkout/multishipping/payment/additional.phtml" name="reward_points" before="-"/>
        </reference>
    </checkout_multishipping_billing>

    <review_product_list>
        <reference name="product.review.form.fields.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.hint.review" template="tooltip.phtml" after="product.info">
                <action method="initRewardType"><type>enterprise_reward/action_review</type></action>
                <action method="setWrapperClass"><class>reward-review</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Submit a review now and earn %s after the review is approved.</message></action>
                <action method="setRewardQtyLimitationMessage" translate="message" module="Enterprise_Reward"><message>You can reward up to %s new reviews(s).</message></action>
                <action method="setIsGuestNote"><value>1</value></action>
            </block>
        </reference>
    </review_product_list>

    <customer_account_create>
        <reference name="customer.form.register.fields.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.register" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_register</type></action>
                <action method="setWrapperClass"><class>reward-register</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Register on our site now and earn %s.</message></action>
            </block>
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.newsletter" template="tooltip.phtml" after="reward.tooltip.register">
                <action method="initRewardType"><type>enterprise_reward/action_newsletter</type></action>
                <action method="setWrapperClass"><class>reward-newsletter</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Subscribe to our newsletter now and earn %s.</message></action>
            </block>
        </reference>
    </customer_account_create>

    <newsletter_manage_index>
        <reference name="customer.newsletter.form.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.newsletter" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_newsletter</type></action>
                <action method="setWrapperClass"><class>reward-newsletter</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Subscribe to our newsletter now and earn %s.</message></action>
            </block>
        </reference>
    </newsletter_manage_index>

    <checkout_cart_index>
        <reference name="checkout.cart.form.before">
            <block type="Enterprise_Reward_Block_Tooltip_Checkout" name="reward.tooltip.checkout" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_orderExtra</type></action>
                <action method="setWrapperClass"><class>reward-checkout</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Check out now and earn %s for this order.</message></action>
                <action method="setIsGuestNote"><value>1</value></action>
            </block>
        </reference>
    </checkout_cart_index>

    <checkout_cart_index>
        <reference name="checkout.cart.form.before">
            <block type="Enterprise_Reward_Block_Tooltip_Checkout" name="reward.tooltip.checkout.salesrule" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_salesrule</type></action>
                <action method="setWrapperClass"><class>reward-checkout</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Check out now and earn %s for this order.</message></action>
                <action method="setIsGuestNote"><value>1</value></action>
            </block>
        </reference>
    </checkout_cart_index>

    <checkout_onepage_index>
        <reference name="checkout.onepage.login.before">
            <block type="Enterprise_Reward_Block_Tooltip_Checkout" name="reward.tooltip.checkout" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_orderExtra</type></action>
                <action method="setWrapperClass"><class>reward-checkout</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Log in now and earn %s for this order.</message></action>
                <action method="setIsGuestNote"><value>1</value></action>
            </block>
        </reference>
    </checkout_onepage_index>

    <checkout_onepage_index>
        <reference name="checkout.onepage.login.before">
            <block type="Enterprise_Reward_Block_Tooltip_Checkout" name="reward.tooltip.checkout.salesrule" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_salesrule</type></action>
                <action method="setWrapperClass"><class>reward-checkout</class></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Log in now and earn %s for this order.</message></action>
                <action method="setIsGuestNote"><value>1</value></action>
            </block>
        </reference>
    </checkout_onepage_index>

    <enterprise_invitation_index_index>
        <reference name="invitations.list.list.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.invitation" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_invitationCustomer</type></action>
                <action method="setWrapperClass"><class>reward-invitation</class></action>
                <action method="setHideBalance"><value>1</value></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Send this invitation now and earn %s when your invitee signs up on our site.</message></action>
                <action method="setRewardQtyLimitationMessage" translate="message" module="Enterprise_Reward"><message>You can reward up to %s invitee registration(s).</message></action>
            </block>
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.invitation.order" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_invitationOrder</type></action>
                <action method="setWrapperClass"><class>reward-invitation</class></action>
                <action method="setHideLink"><value>1</value></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Earn %s for purchases your invitees make.</message></action>
                <action method="setRewardQtyLimitationMessage" translate="message" module="Enterprise_Reward"><message>You can reward up to %s invitee purchase(s).</message></action>
            </block>
        </reference>
    </enterprise_invitation_index_index>

    <enterprise_invitation_index_send>
        <reference name="invitations.form.form.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.invitation" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_invitationCustomer</type></action>
                <action method="setWrapperClass"><class>reward-invitation</class></action>
                <action method="setHideBalance"><value>1</value></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Send this invitation now and earn %s when your invitee signs up on our site.</message></action>
                <action method="setRewardQtyLimitationMessage" translate="message" module="Enterprise_Reward"><message>You can reward up to %s invitee registration(s).</message></action>
            </block>
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.invitation.order" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_invitationOrder</type></action>
                <action method="setWrapperClass"><class>reward-invitation</class></action>
                <action method="setHideLink"><value>1</value></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Earn %s for purchases your invitees make.</message></action>
                <action method="setRewardQtyLimitationMessage" translate="message" module="Enterprise_Reward"><message>You can reward up to %s invitee purchase(s).</message></action>
            </block>
        </reference>
    </enterprise_invitation_index_send>

    <enterprise_invitation_customer_account_create>
        <reference name="customer.form.register.invitation.fields.before">
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.register" template="tooltip.phtml">
                <action method="initRewardType"><type>enterprise_reward/action_register</type></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Register on our site now and earn %s.</message></action>
            </block>
            <block type="Enterprise_Reward_Block_Tooltip" name="reward.tooltip.newsletter" template="tooltip.phtml" after="reward.tooltip.register">
                <action method="initRewardType"><type>enterprise_reward/action_newsletter</type></action>
                <action method="setRewardMessage" translate="message" module="Enterprise_Reward"><message>Subscribe to our newsletter now and earn %s.</message></action>
            </block>
        </reference>
    </enterprise_invitation_customer_account_create>

    <sales_order_view>
        <reference name="order_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_view>
    <sales_order_print>
        <reference name="order_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_print>
    <sales_email_order_items>
        <reference name="order_totals">
           <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_email_order_items>

    <sales_order_invoice>
        <reference name="invoice_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_invoice>
    <sales_order_printinvoice>
        <reference name="invoice_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_printinvoice>
    <sales_email_order_invoice_items>
        <reference name="invoice_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_email_order_invoice_items>

    <sales_order_creditmemo>
        <reference name="creditmemo_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_creditmemo>
    <sales_order_printcreditmemo>
        <reference name="creditmemo_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_order_printcreditmemo>
    <sales_email_order_creditmemo_items>
        <reference name="creditmemo_totals">
            <block type="Enterprise_Reward_Block_Sales_Order_Total" name="reward.sales.order.total" />
        </reference>
    </sales_email_order_creditmemo_items>
</layout>
