<?php
/**
 * {license_notice}
 *
 * @category    Mage
 * @package     Mage_Launcher
 * @copyright   {copyright}
 * @license     {license_link}
 */

/** @var $this Mage_Launcher_Block_Adminhtml_Storelauncher_Page */
?>

<section class="store-launcher">
    <div class="page-title">
        <h1 class="title"><?php echo $this->__('Store Launcher'); ?></h1>
        <div class="actions">
            <button class="action-launch-store primary"
                <?php if (!$this->getPage()->isComplete()): ?>disabled="disabled"<?php endif; ?>
                    id="action-launch-my-store"
                    data-show-popup="launch-my-store">
                <span><?php echo $this->__('Launch My Store'); ?></span>
            </button>
        </div>
    </div>
    <div id="store-launcher-content" class="store-launcher-content">
        <div class="store-launcher-content-inner">
            <?php foreach($this->getTileBlocks() as $tile):?>
            <?php echo $tile->toHtml() ?>
            <?php endforeach;?>
        </div>
    </div>
    <div id="drawer" class="drawer">
        <header class="drawer-header">
            <div class="drawer-header-inner">
                <h1 class="title"></h1>
                <div class="actions">
                    <button type="button" class="action-save-settings primary" data-save-url=""><?php echo $this->__('Save'); ?></button>
                    <button type="button" class="action-close-drawer" title="<?php echo $this->__('Close'); ?>"></button>
                </div>
            </div>
        </header>
        <section class="drawer-content">
            <div class="drawer-content-inner"></div>
        </section>
        <footer class="drawer-footer">
            <div class="drawer-footer-inner"></div>
        </footer>
    </div>
</section>
<div class="fade">
    <div class="store-launcher-popup launch-my-store-popup" id="launch-my-store-popup">
        <header class="store-launcher-popup-header">
            <button type="button"
                    title="<?php echo $this->__('Close'); ?>"
                    class="action-close-store-launcher-popup"
                    id="action-close-launch-my-store-popup">
                <span><?php echo $this->__('Close'); ?></span>
            </button>
        </header>
        <div class="store-launcher-popup-content">
            <hgroup class="hgroup">
                <h2 class="title"><?php echo $this->__('Congratulations!'); ?></h2>
                <h3 class="subtitle"><?php echo $this->__('Your new store is ready to launch'); ?></h3>
            </hgroup>
            <ul class="checklist">
                <li class="completed"><?php echo $this->__('Store Info'); ?></li>
                <li class="completed"><?php echo $this->__('Tax Rules'); ?></li>
                <li class="completed"><?php echo $this->__('Design Theme'); ?></li>
                <li class="completed"><?php echo $this->__('Shipping info'); ?></li>
                <li class="completed"><?php echo $this->__('PayPal Express'); ?></li>
                <li class="completed"><?php echo $this->__('Products (x)'); ?></li>
            </ul>
            <p class="launch-tagline">
                <?php echo $this->__('Before opening, you can'); ?>
            </p>
            <ul class="launch-actions">
                <li><a href="#"><?php echo $this->__('Preview your store'); ?></a></li>
                <li><a href="#"><?php echo $this->__('Add more products'); ?></a></li>
                <li><a href="#"><?php echo $this->__('Run a test transaction'); ?></a></li>
            </ul>
            <a id="action-launch-store"
               href="<?php echo Mage::getBaseUrl(); ?>"
               target="_blank"
               class="action-store-launcher-popup-primary">
                <?php echo $this->__('Launch your store now'); ?>
            </a>
        </div>
        <footer class="store-launcher-popup-footer">
            <button type="button"
                    id="action-final-checks"
                    class="action-store-launcher-popup-secondary">
                <span><?php echo $this->__('Run a few final checks'); ?></span>
            </button>
        </footer>
    </div>
</div>
<?php echo $this->getChildBlock('store.tour')->setUseContainer(false)->toHtml();?>
<?php if (!$this->getChildBlock('welcome.screen')->isWelcomeScreenShown()):?>
    <?php echo $this->getChildBlock('welcome.screen')->setUseContainer(false)->toHtml();?>
<?php endif; ?>
<script type="text/javascript">
(function($) {
    $(document).ready(function() {
        if($('#welcome-screen').length) {
            $('#welcome-screen').welcomScreen(
                {'ajaxUrl': "<?php echo $this->getUrl('*/storelauncher_index/showScreen');?>"}
            );
        }
        $('#store-tour').storeTour();
    });
})(jQuery);
</script>
