<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     default_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->

<layout>
    <adminhtml_widget_index>
        <block name="wysiwyg_widget" type="Mage_Widget_Block_Adminhtml_Widget" output="1" />
    </adminhtml_widget_index>

    <adminhtml_widget_loadoptions>
        <block name="wysiwyg_widget.options" type="Mage_Widget_Block_Adminhtml_Widget_Options" output="1" />
    </adminhtml_widget_loadoptions>

    <adminhtml_widget_instance_index>
        <update handle='adminhtml_widget_instance_block' />
        <reference name="content">
            <block type="Mage_Widget_Block_Adminhtml_Widget_Instance" name="adminhtml.widget.instance.grid.container" />
        </reference>
    </adminhtml_widget_instance_index>

    <adminhtml_widget_instance_block>
        <reference name='adminhtml.widget.instance.grid.container'>
            <block type='Mage_Backend_Block_Widget_Grid' name='adminhtml.widget.instance.grid' as='grid'>
                <arguments>
                    <id>widgetInstanceGrid</id>
                    <default_sort>instance_id</default_sort>
                    <default_dir>ASC</default_dir>
                    <dataSource type='object'>Mage_Widget_Model_Resource_Widget_Instance_Collection</dataSource>
                </arguments>
                <block type='Mage_Backend_Block_Widget_Grid_ColumnSet' name='adminhtml.widget.instance.grid.columnSet' as='grid.columnSet'>
                    <arguments>
                        <rowUrl>
                            <path>*/*/edit</path>
                        <extraParamsTemplate>
                            <instance_id>getId</instance_id>
                        </extraParamsTemplate>
                        </rowUrl>
                    </arguments>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='instance_id'>
                        <arguments>
                            <header translate='true' module='Mage_Widget'>Widget ID</header>
                            <align>left</align>
                            <index>instance_id</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='title'>
                        <arguments>
                            <header translate='true' module='Mage_Widget'>Widget Instance</header>
                            <align>left</align>
                            <index>title</index>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='type'>
                        <arguments>
                            <header translate='true' module='Mage_Widget'>Type</header>
                            <align>left</align>
                            <index>instance_type</index>
                            <type>options</type>
                            <options type='options'>Mage_Widget_Model_Resource_Widget_Instance_Options_Types</options>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='theme_id'>
                        <arguments>
                            <header translate='true' module='Mage_Widget'>Design Theme</header>
                            <align>left</align>
                            <index>theme_id</index>
                            <type>options</type>
                            <options type='options'>Mage_Widget_Model_Resource_Widget_Instance_Options_ThemeId</options>
                            <with_empty>1</with_empty>
                        </arguments>
                    </block>
                    <block type='Mage_Backend_Block_Widget_Grid_Column' as='sort_order'>
                        <arguments>
                            <header translate='true' module='Mage_Widget'>Sort Order</header>
                            <align>center</align>
                            <index>sort_order</index>
                            <width>100</width>
                        </arguments>
                    </block>
                </block>
            </block>
        </reference>
    </adminhtml_widget_instance_block>

    <adminhtml_widget_instance_edit>
        <reference name="head">
            <action method="setCanLoadExtJs"><flag>1</flag></action>
            <action method="addJs"><file>mage/adminhtml/wysiwyg/widget.js</file></action>
            <action method="addJs"><file>prototype/window.js</file></action>
            <action method="addCss"><file>prototype/windows/themes/default.css</file></action>
            <action method="addCss"><file>Mage_Core::prototype/magento.css</file></action>
            <action method="addCss"><file>Mage_Widget::css/styles.css</file></action>
        </reference>
        <reference name="content">
            <block type="Mage_Widget_Block_Adminhtml_Widget_Instance_Edit" name="widget_instance_edit" />
        </reference>
        <reference name="left">
            <block type="Mage_Widget_Block_Adminhtml_Widget_Instance_Edit_Tabs" name="widget_instance_edit_tabs">
                <block type="Mage_Widget_Block_Adminhtml_Widget_Instance_Edit_Tab_Settings" name="widget_instance_edit_tab_settings" />
                <block type="Mage_Widget_Block_Adminhtml_Widget_Instance_Edit_Tab_Main" name="widget_instance_edit_tab_main" />
                <block type="Mage_Widget_Block_Adminhtml_Widget_Instance_Edit_Tab_Properties" name="widget_instance_edit_tab_properties" />
                <action method="addTab"><name>settings_section</name><block>widget_instance_edit_tab_settings</block></action>
                <action method="addTab"><name>main_section</name><block>widget_instance_edit_tab_main</block></action>
                <action method="addTab"><name>properties_section</name><block>widget_instance_edit_tab_properties</block></action>
            </block>
        </reference>
        <reference name="js">
            <block type="Mage_Adminhtml_Block_Template" template="Mage_Widget::instance/js.phtml" name="widget_instance_js"></block>
        </reference>
    </adminhtml_widget_instance_edit>
</layout>
