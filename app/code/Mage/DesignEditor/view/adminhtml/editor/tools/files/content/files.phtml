<?php
/**
 * {license_notice}
 *
 * @category    design
 * @package     Mage_DesignEditor
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>

<?php
/** @var $this Mage_DesignEditor_Block_Adminhtml_Editor_Tools_Files_Content_Files */
?>

<?php if ($this->getFilesCount() > 0): ?>

    <div name="css-editor" >
        <?php if ($this->getStorageType() == 'font'): ?>
            <table cellspacing="0">
                <?php foreach ($this->getFiles() as $file): ?>
                    <tr>
                        <td class="nm filecnt file-font" id="<?php echo $file['id'] ?>">
                            <?php echo $file['text'] ?>
                        </td>
                        <td>
                            <a href="#" class="action-add" title="<?php echo $this->__('Insert file'); ?>" data-id="<?php echo $file['id'] ?>">
                                <span><?php echo $this->__('Insert file'); ?></span>
                            </a>
                        </td>
                        <td>
                            <a href="#" class="action-delete" title="<?php echo $this->__('Delete file'); ?>" data-id="<?php echo $file['id'] ?>">
                                <span><?php echo $this->__('Delete file'); ?></span>
                            </a>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </table>
        <?php else: ?>
            <?php foreach ($this->getFiles() as $file): ?>
                <div class="filecnt file-font" id="<?php echo $file['id'] ?>">
                    <p class="nm">
                        <?php if (isset($file['thumbnailParams'])): ?>
                            <img src="<?php echo $this->getUrl('*/*/previewImage', $file['thumbnailParams']) ?>">
                        <?php endif; ?>
                        <?php echo $file['width'] ?>x<?php echo $file['height'] ?> px.
                        <?php echo $file['text'] ?>
                    </p>
                </div>
            <?php endforeach; ?>
        <?php endif; ?>
    </div>

<?php else: ?>
    <?php echo $this->__('No files found') ?>
<?php endif; ?>

<script type="text/javascript">
    (function ($) {
        $('#css-editor .action-delete').on('click', function() {
            MediabrowserInstance.deleteFiles();
        });
        $('#css-editor .action-add').on('click', function() {
            MediabrowserInstance.insert();
        });
    })(jQuery);
</script>