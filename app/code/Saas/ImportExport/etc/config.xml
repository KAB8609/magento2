<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<config>
    <modules>
        <Saas_ImportExport>
            <version>2.0.0.0</version>
            <active>false</active>
            <depends>
                <Mage_ImportExport/>
                <Enterprise_PageCache/>
            </depends>
        </Saas_ImportExport>
    </modules>
    <global>
        <importexport module="Saas_ImportExport">
            <export_entities>
                <catalog_product translate="label">
                    <model_token>Saas_ImportExport_Model_Export_Entity_Product</model_token>
                    <per_page>100</per_page>
                    <label>Products</label>
                </catalog_product>
                <customer translate="label">
                    <model_token>Saas_ImportExport_Model_Export_Entity_Eav_Customer</model_token>
                    <per_page>100</per_page>
                    <label>Customers Main File</label>
                </customer>
                <customer_address translate="label">
                    <model_token>Saas_ImportExport_Model_Export_Entity_Eav_Customer_Address</model_token>
                    <per_page>100</per_page>
                    <label>Customer Addresses</label>
                </customer_address>
            </export_entities>
            <import_entities>
                <catalog_product translate="label">
                    <model_token>Saas_ImportExport_Model_Import_Entity_Product</model_token>
                    <label>Products</label>
                </catalog_product>
                <product_images translate="label">
                    <!-- model_token is required for behaviours -->
                    <model_token>Saas_ImportExport_Model_Service_Image_Import</model_token>
                    <label>Product Images</label>
                    <behavior_token>Saas_ImportExport_Model_Source_Import_Behavior_Image</behavior_token>
                </product_images>
            </import_entities>
            <import>
                <image>
                    <type_code>product_images</type_code>
                    <archive>
                        <file_field_name>import_file_image</file_field_name>
                        <allowed_extensions>
                            <zip/>
                        </allowed_extensions>
                    </archive>
                    <filename_limit>150</filename_limit>
                    <allowed_extensions>
                        <png/>
                        <gif/>
                        <jpg/>
                        <jpe/>
                        <jpeg/>
                    </allowed_extensions>
                    <file_size_limit>200000</file_size_limit><!-- 2 mb -->
                    <allowed_mimetypes>
                        <png>image/png</png>
                        <gif>image/gif</gif>
                        <jpeg>image/jpeg</jpeg>
                    </allowed_mimetypes>
                    <width_limit>2000</width_limit>
                    <height_limit>2000</height_limit>
                </image>
            </import>
            <export_file_formats>
                <csv translate="label">
                    <model_token>Saas_ImportExport_Model_Export_Adapter_Csv</model_token>
                    <label>CSV</label>
                </csv>
            </export_file_formats>
        </importexport>
        <events>
            <process_export_catalog_product>
                <observers>
                    <saas_importexport>
                        <asynchronous>true</asynchronous>
                        <class>Saas_Queue_Model_Observer_Export</class>
                        <method>processExport</method>
                        <params>
                            <task_name>export_catalog_product</task_name>
                        </params>
                    </saas_importexport>
                </observers>
            </process_export_catalog_product>
            <process_export_customer>
                <observers>
                    <saas_importexport>
                        <asynchronous>true</asynchronous>
                        <class>Saas_Queue_Model_Observer_Export</class>
                        <method>processExport</method>
                        <params>
                            <task_name>export_customer</task_name>
                        </params>
                    </saas_importexport>
                </observers>
            </process_export_customer>
            <process_import_catalog_product>
                <observers>
                    <saas_importexport>
                        <asynchronous>true</asynchronous>
                        <class>Saas_Queue_Model_Observer_Import</class>
                        <method>processImport</method>
                        <params>
                            <task_name>import_catalog_product</task_name>
                        </params>
                    </saas_importexport>
                </observers>
            </process_import_catalog_product>
            <process_import_customer>
                <observers>
                    <saas_importexport>
                        <asynchronous>true</asynchronous>
                        <class>Saas_Queue_Model_Observer_Import</class>
                        <method>processImport</method>
                        <params>
                            <task_name>import_customer</task_name>
                        </params>
                    </saas_importexport>
                </observers>
            </process_import_customer>
        </events>
        <di>
            <Saas_ImportExport_Helper_Import_State>
                <parameters>
                    <stateFlag>
                        <instance type="Saas_ImportExport_Model_Import_State_Flag" />
                    </stateFlag>
                </parameters>
            </Saas_ImportExport_Helper_Import_State>
            <Saas_ImportExport_Helper_Export_State>
                <parameters>
                    <stateFlag>
                        <instance type="Saas_ImportExport_Model_Export_State_Flag" />
                    </stateFlag>
                </parameters>
            </Saas_ImportExport_Helper_Export_State>
            <Saas_ImportExport_Model_Export_System_Message_Finished>
                <parameters>
                    <stateHelper>
                        <instance type="Saas_ImportExport_Helper_Export_State" />
                    </stateHelper>
                </parameters>
            </Saas_ImportExport_Model_Export_System_Message_Finished>
            <Saas_ImportExport_Model_Import_System_Message_Finished>
                <parameters>
                    <stateHelper>
                        <instance type="Saas_ImportExport_Helper_Import_State" />
                    </stateHelper>
                </parameters>
            </Saas_ImportExport_Model_Import_System_Message_Finished>
        </di>
    </global>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <Saas_ImportExport before="Mage_ImportExport_Adminhtml">Saas_ImportExport_Adminhtml</Saas_ImportExport>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <saas_importexport module="Saas_ImportExport">
                    <file>layout.xml</file>
                </saas_importexport>
            </updates>
        </layout>
        <di>
            <Mage_AdminNotification_Model_System_MessageList>
                <parameters>
                    <messages>
                        <export_finished>Saas_ImportExport_Model_Export_System_Message_Finished</export_finished>
                        <import_finished>Saas_ImportExport_Model_Import_System_Message_Finished</import_finished>
                    </messages>
                </parameters>
            </Mage_AdminNotification_Model_System_MessageList>
        </di>
    </adminhtml>
</config>
