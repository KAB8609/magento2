<?xml version="1.0"?>
<!--
/**
 * Module enforces limitations on the number of entities of certain types that can be created in the system
 *
 * {license_notice}
 *
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<config>
    <modules>
        <Saas_Limitation>
            <version>1.0.0.0</version>
            <active>false</active>
            <depends>
                <Mage_Core/>
            </depends>
        </Saas_Limitation>
    </modules>
    <global>
        <di>
            <Saas_Limitation_Model_Dictionary>
                <parameters>
                    <messages translate="store,store_group,website,user,catalog_category,catalog_product,catalog_product_creation,catalog_product_variations" module="Saas_Limitation">
                        <store>Sorry, you are using all the store views your account allows. To add more, first delete a store view or upgrade your service.</store>
                        <store_group>You are using the maximum number of stores allowed.</store_group>
                        <website>Sorry, but you can't add any more websites with this account.</website>
                        <user>Sorry, you are using all the admin users your account allows. To add more, first delete an admin user or upgrade your service.</user>
                        <catalog_category>Sorry, you are using all the categories your account allows. To add more, first delete a category or upgrade your service.</catalog_category>
                        <catalog_product>Sorry, you are using all the products and variations your account allows. To add more, first delete a product or upgrade your service.</catalog_product>
                        <catalog_product_creation>You can't create new product.</catalog_product_creation>
                        <catalog_product_variations>We could not save the product. You tried to add %d products, but the most you can have is %d. To add more, please upgrade your service.</catalog_product_variations>
                    </messages>
                </parameters>
            </Saas_Limitation_Model_Dictionary>
            <!-- Store -->
            <Saas_Limitation_Model_Store_Observer_Controller>
                <parameters>
                    <limitation>Saas_Limitation_Model_Store_Limitation</limitation>
                    <messageCode>store</messageCode>
                </parameters>
            </Saas_Limitation_Model_Store_Observer_Controller>
            <Saas_Limitation_Model_Store_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_Store_Limitation</limitation>
                    <messageCode>store</messageCode>
                </parameters>
            </Saas_Limitation_Model_Store_Observer_Entity>
            <Saas_Limitation_Model_Store_Observer_Grid>
                <parameters>
                    <limitation>Saas_Limitation_Model_Store_Limitation</limitation>
                    <blockClass>Mage_Adminhtml_Block_System_Store_Store</blockClass>
                    <buttonId>add_store</buttonId>
                </parameters>
            </Saas_Limitation_Model_Store_Observer_Grid>
            <!-- Store group -->
            <Saas_Limitation_Model_Store_Group_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_Store_Group_Limitation</limitation>
                    <messageCode>store_group</messageCode>
                </parameters>
            </Saas_Limitation_Model_Store_Group_Observer_Entity>
            <Saas_Limitation_Model_Store_Group_Observer_Grid>
                <parameters>
                    <limitation>Saas_Limitation_Model_Store_Group_Limitation</limitation>
                    <blockClass>Mage_Adminhtml_Block_System_Store_Store</blockClass>
                    <buttonId>add_group</buttonId>
                </parameters>
            </Saas_Limitation_Model_Store_Group_Observer_Grid>
            <!-- Website -->
            <Saas_Limitation_Model_Website_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_Website_Limitation</limitation>
                    <messageCode>website</messageCode>
                </parameters>
            </Saas_Limitation_Model_Website_Observer_Entity>
            <Saas_Limitation_Model_Website_Observer_Grid>
                <parameters>
                    <limitation>Saas_Limitation_Model_Website_Limitation</limitation>
                    <blockClass>Mage_Adminhtml_Block_System_Store_Store</blockClass>
                    <buttonId>add</buttonId>
                </parameters>
            </Saas_Limitation_Model_Website_Observer_Grid>
            <!-- User -->
            <Saas_Limitation_Model_User_Observer_Controller>
                <parameters>
                    <limitation>Saas_Limitation_Model_User_Limitation</limitation>
                    <messageCode>user</messageCode>
                </parameters>
            </Saas_Limitation_Model_User_Observer_Controller>
            <Saas_Limitation_Model_User_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_User_Limitation</limitation>
                    <messageCode>user</messageCode>
                </parameters>
            </Saas_Limitation_Model_User_Observer_Entity>
            <Saas_Limitation_Model_User_Observer_Grid>
                <parameters>
                    <limitation>Saas_Limitation_Model_User_Limitation</limitation>
                    <blockClass>Mage_User_Block_User</blockClass>
                    <buttonId>add</buttonId>
                </parameters>
            </Saas_Limitation_Model_User_Observer_Grid>
            <!-- Category -->
            <Saas_Limitation_Model_Catalog_Category_Observer_Controller>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Category_Limitation</limitation>
                    <messageCode>catalog_category</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Category_Observer_Controller>
            <Saas_Limitation_Model_Catalog_Category_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Category_Limitation</limitation>
                    <messageCode>catalog_category</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Category_Observer_Entity>
            <Saas_Limitation_Model_Catalog_Category_Observer_Block>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Category_Limitation</limitation>
                </parameters>
            </Saas_Limitation_Model_Catalog_Category_Observer_Block>
            <!-- Product -->
            <Saas_Limitation_Model_Catalog_Product_Observer_Controller>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Product_Limitation</limitation>
                    <messageCode>catalog_product</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Controller>
            <Saas_Limitation_Model_Catalog_Product_Observer_Controller_Redirect>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Product_Limitation</limitation>
                    <messageCode>catalog_product_creation</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Controller_Redirect>
            <Saas_Limitation_Model_Catalog_Product_Observer_Entity>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Product_Limitation</limitation>
                    <messageCode>catalog_product</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Entity>
            <Saas_Limitation_Model_Catalog_Product_Observer_Entity_Duplication>
                <parameters>
                    <messageCode>catalog_product_creation</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Entity_Duplication>
            <Saas_Limitation_Model_Catalog_Product_Observer_Entity_Variations>
                <parameters>
                    <messageCode>catalog_product_variations</messageCode>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Entity_Variations>
            <Saas_Limitation_Model_Catalog_Product_Observer_Grid>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Product_Limitation</limitation>
                    <blockClass>Mage_Adminhtml_Block_Catalog_Product</blockClass>
                    <buttonId>add_new</buttonId>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Grid>
            <Saas_Limitation_Model_Catalog_Product_Observer_Form>
                <parameters>
                    <limitation>Saas_Limitation_Model_Catalog_Product_Limitation</limitation>
                </parameters>
            </Saas_Limitation_Model_Catalog_Product_Observer_Form>
        </di>
        <events>
            <website_save_before>
                <observers>
                    <saas_limitation_website>
                        <class>Saas_Limitation_Model_Website_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_website>
                </observers>
            </website_save_before>
            <store_group_save_before>
                <observers>
                    <saas_limitation_store_group>
                        <class>Saas_Limitation_Model_Store_Group_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_store_group>
                </observers>
            </store_group_save_before>
            <store_save_before>
                <observers>
                    <saas_limitation_store>
                        <class>Saas_Limitation_Model_Store_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_store>
                </observers>
            </store_save_before>
            <admin_user_save_before>
                <observers>
                    <saas_limitation_user>
                        <class>Saas_Limitation_Model_User_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_user>
                </observers>
            </admin_user_save_before>
            <catalog_category_save_before>
                <observers>
                    <saas_limitation_catalog_category>
                        <class>Saas_Limitation_Model_Catalog_Category_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_catalog_category>
                </observers>
            </catalog_category_save_before>
            <catalog_product_save_before>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_catalog_product>
                </observers>
            </catalog_product_save_before>
            <catalog_product_validate_before>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Entity</class>
                        <method>restrictCreation</method>
                    </saas_limitation_catalog_product>
                </observers>
            </catalog_product_validate_before>
            <catalog_product_validate_variations_before>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Entity_Variations</class>
                        <method>restrictCreation</method>
                    </saas_limitation_catalog_product>
                </observers>
            </catalog_product_validate_variations_before>
            <catalog_model_product_duplicate>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Entity_Duplication</class>
                        <method>restrict</method>
                    </saas_limitation_catalog_product>
                </observers>
            </catalog_model_product_duplicate>
        </events>
    </global>
    <adminhtml>
        <events>
            <adminhtml_widget_container_html_before>
                <observers>
                    <saas_limitation_website>
                        <class>Saas_Limitation_Model_Website_Observer_Grid</class>
                        <method>removeButton</method>
                    </saas_limitation_website>
                    <saas_limitation_store>
                        <class>Saas_Limitation_Model_Store_Observer_Grid</class>
                        <method>disableButton</method>
                    </saas_limitation_store>
                    <saas_limitation_user>
                        <class>Saas_Limitation_Model_User_Observer_Grid</class>
                        <method>disableButton</method>
                    </saas_limitation_user>
                    <saas_limitation_store_group>
                        <class>Saas_Limitation_Model_Store_Group_Observer_Grid</class>
                        <method>removeButton</method>
                    </saas_limitation_store_group>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Grid</class>
                        <method>disableSplitButton</method>
                    </saas_limitation_catalog_product>
                </observers>
            </adminhtml_widget_container_html_before>
            <core_block_abstract_prepare_layout_after>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Form</class>
                        <method>removeSavingButtons</method>
                    </saas_limitation_catalog_product>
                </observers>
            </core_block_abstract_prepare_layout_after>
            <adminhtml_block_html_before>
                <observers>
                    <saas_limitation_catalog_category>
                        <class>Saas_Limitation_Model_Catalog_Category_Observer_Block</class>
                        <method>disableCreationButtons</method>
                    </saas_limitation_catalog_category>
                </observers>
            </adminhtml_block_html_before>
            <controller_action_predispatch_adminhtml_system_store_index>
                <observers>
                    <saas_limitation_store>
                        <class>Saas_Limitation_Model_Store_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_store>
                </observers>
            </controller_action_predispatch_adminhtml_system_store_index>
            <controller_action_predispatch_adminhtml_user_index>
                <observers>
                    <saas_limitation_user>
                        <class>Saas_Limitation_Model_User_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_user>
                </observers>
            </controller_action_predispatch_adminhtml_user_index>
            <controller_action_predispatch_adminhtml_catalog_product_index>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_product>
                </observers>
            </controller_action_predispatch_adminhtml_catalog_product_index>
            <controller_action_predispatch_adminhtml_catalog_product_new>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_product>
                    <saas_limitation_catalog_category>
                        <class>Saas_Limitation_Model_Catalog_Category_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_category>
                </observers>
            </controller_action_predispatch_adminhtml_catalog_product_new>
            <controller_action_predispatch_adminhtml_catalog_product_edit>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_product>
                    <saas_limitation_catalog_category>
                        <class>Saas_Limitation_Model_Catalog_Category_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_category>
                </observers>
            </controller_action_predispatch_adminhtml_catalog_product_edit>
            <controller_action_catalog_product_save_entity_after>
                <observers>
                    <saas_limitation_catalog_product>
                        <class>Saas_Limitation_Model_Catalog_Product_Observer_Controller_Redirect</class>
                        <method>restrictNewEntityCreation</method>
                    </saas_limitation_catalog_product>
                </observers>
            </controller_action_catalog_product_save_entity_after>
            <controller_action_predispatch_adminhtml_catalog_category_index>
                <observers>
                    <saas_limitation_catalog_category>
                        <class>Saas_Limitation_Model_Catalog_Category_Observer_Controller</class>
                        <method>displayNotification</method>
                    </saas_limitation_catalog_category>
                </observers>
            </controller_action_predispatch_adminhtml_catalog_category_index>
        </events>
    </adminhtml>
</config>
