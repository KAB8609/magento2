<?php
/**
 * {license_notice}
 *
 * @category    Mage
 * @package     Saas_Launcher
 * @copyright   {copyright}
 * @license     {license_link}
 */

/** @var $this Saas_Launcher_Block_Adminhtml_Storelauncher_Page */
?>

<section class="store-launcher">
    <div class="page-title">
        <div class="page-title-inner">
            <h1 class="title"><?php echo $this->__('Store Launcher'); ?></h1>
            <div class="actions">
                <button class="action-launch-store primary"
                        <?php if (!$this->getPage()->isComplete()): ?>disabled="disabled"<?php endif; ?>
                        id="action-launch-my-store"
                        data-show-popup="launch-my-store">
                    <span><?php echo $this->__('Launch My Store'); ?></span>
                </button>
            </div>
        </div>
    </div>
    <div id="drawer" class="drawer">
        <header class="drawer-header">
            <div class="drawer-header-inner">
                <h1 class="title"></h1>
                <div class="actions">
                    <button type="button" class="action-save-settings primary" data-save-url=""><?php echo $this->__('Save'); ?></button>
                    <button type="button" class="action-close-drawer" title="<?php echo $this->__('Close'); ?>"></button>
                </div>
            </div>
        </header>
        <section class="drawer-content">
            <div class="drawer-content-inner"></div>
        </section>
        <footer class="drawer-footer">
            <div class="drawer-footer-inner"></div>
        </footer>
    </div>
    <div id="store-launcher-content" class="store-launcher-content">
        <div class="store-launcher-content-inner">
            <?php foreach($this->getTileBlocks() as $tile):?>
            <?php echo $tile->toHtml() ?>
            <?php endforeach;?>
        </div>
    </div>
</section>

<?php echo $this->getChildBlock('launch.my.store')->toHtml();?>
<?php echo $this->getChildBlock('store.tour')->toHtml();?>
<?php if (!$this->getChildBlock('welcome.screen')->isWelcomeScreenShown()):?>
    <?php echo $this->getChildBlock('welcome.screen')->toHtml();?>
<?php endif; ?>
<script type="text/javascript">
jQuery(function($) {
    head.js("<?php echo $this->getViewFileUrl('Saas_Launcher::page/storelauncher/store-tour.js') ?>",
        function () {
            if ($('#welcome-screen').length) {
                $('#welcome-screen').welcomScreen(
                    {'ajaxUrl': "<?php echo $this->getUrl('*/storelauncher_index/showScreen');?>"}
                );
            }
            $('#store-tour').storeTour();
        }
    );
});
</script>
