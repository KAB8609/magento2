<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * {license_notice}
 *
 * @category    Enterprise
 * @package     Enterprise_Customer
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<layout version="0.1.0">
    <customer_account_create>
        <block type="enterprise_customer/form" template="form/userattributes.phtml" name="customer_form_user_attributes">
            <action method="setFormCode"><code>customer_account_create</code></action>
            <action method="setEntityModelClass"><code>customer/customer</code></action>
        </block>
        <block type="enterprise_customer/form" template="form/userattributes.phtml" name="customer_form_address_user_attributes">
            <action method="setFormCode"><code>customer_register_address</code></action>
            <action method="setEntityModelClass"><code>customer/address</code></action>
        </block>
        <reference name="content">
            <block type="customer/form_register" name="customer_form_register" template="form/register.phtml">
                <action method="append"><block>customer.form.register.fields.before</block><alias>form_fields_before</alias></action>
                <action method="append"><block>customer_form_user_attributes</block></action>
                <action method="append"><block>customer_form_address_user_attributes</block></action>
            </block>
        </reference>
        <update handle="customer_form_template_handle"/>
    </customer_account_create>

    <customer_account_edit>
        <reference name="customer_edit">
            <block type="enterprise_customer/form" template="form/userattributes.phtml" name="customer_form_user_attributes">
                <action method="setFormCode"><code>customer_account_edit</code></action>
            </block>
        </reference>
        <update handle="customer_form_template_handle"/>
    </customer_account_edit>

    <customer_address_form>
        <reference name="customer_address_edit">
            <block type="enterprise_customer/form" template="form/userattributes.phtml" name="customer_form_user_attributes">
                <action method="setFormCode"><code>customer_address_edit</code></action>
            </block>
        </reference>
        <update handle="customer_form_template_handle"/>
    </customer_address_form>

    <customer_form_template_handle>
        <reference name="content">
            <block name="customer_form_template" type="enterprise_customer/form_template">
                <action method="addRenderer">
                    <type>text</type>
                    <renderer_block>enterprise_customer/form_renderer_text</renderer_block>
                    <template>form/renderer/text.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>textarea</type>
                    <renderer_block>enterprise_customer/form_renderer_textarea</renderer_block>
                    <template>form/renderer/textarea.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>multiline</type>
                    <renderer_block>enterprise_customer/form_renderer_multiline</renderer_block>
                    <template>form/renderer/multiline.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>date</type>
                    <renderer_block>enterprise_customer/form_renderer_date</renderer_block>
                    <template>form/renderer/date.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>select</type>
                    <renderer_block>enterprise_customer/form_renderer_select</renderer_block>
                    <template>form/renderer/select.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>multiselect</type>
                    <renderer_block>enterprise_customer/form_renderer_multiselect</renderer_block>
                    <template>form/renderer/multiselect.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>boolean</type>
                    <renderer_block>enterprise_customer/form_renderer_boolean</renderer_block>
                    <template>form/renderer/boolean.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>file</type>
                    <renderer_block>enterprise_customer/form_renderer_file</renderer_block>
                    <template>form/renderer/file.phtml</template>
                </action>
                <action method="addRenderer">
                    <type>image</type>
                    <renderer_block>enterprise_customer/form_renderer_image</renderer_block>
                    <template>form/renderer/image.phtml</template>
                </action>
            </block>
        </reference>
    </customer_form_template_handle>
</layout>
