<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     default_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->

<layout>
    <adminhtml_crypt_key_index>
        <reference name="content">
            <block type="Enterprise_Pci_Block_Adminhtml_Crypt_Key_Edit" name="pci.crypt.key.edit" as="crypt_key_edit" template="Mage_Backend::widget/form/container.phtml">
                <block type="Enterprise_Pci_Block_Adminhtml_Crypt_Key_Form" name="pci.crypt.key.form" as="form"/>
            </block>
        </reference>
    </adminhtml_crypt_key_index>
    <adminhtml_locks_index>
        <update handle="formkey"/>
        <update handle="adminhtml_locks_block"/>
        <reference name="content">
            <block type="Enterprise_Pci_Block_Adminhtml_Locks" name="pci.locks.container" as="locks_container">
            </block>
        </reference>
    </adminhtml_locks_index>
    <adminhtml_locks_block>
        <reference name="pci.locks.container">
                <block type="Mage_Backend_Block_Widget_Grid" name="adminhtml.block.locks.grid" as="grid">
                    <arguments>
                        <id>lockedAdminsGrid</id>
                        <dataSource type="object">Mage_User_Model_Resource_User_Locked_Collection</dataSource>
                        <default_sort>user_id</default_sort>
                        <use_ajax>1</use_ajax>
                        <grid_url type="url">
                            <path>*/*/grid</path>
                            <params>
                                <_current>1</_current>
                            </params>
                        </grid_url>
                    </arguments>
                    <block type="Mage_Backend_Block_Widget_Grid_Massaction" name="adminhtml.block.locks.grid.massactions" as="grid.massaction">
                        <arguments>
                            <massaction_id_field>user_id</massaction_id_field>
                            <form_field_name>unlock</form_field_name>
                            <use_select_all>1</use_select_all>
                            <options>
                                <unlock>
                                    <label translate="true" module="Enterprise_Pci">Unlock</label>
                                    <url>*/*/massUnlock</url>
                                    <selected>1</selected>
                                </unlock>
                            </options>
                        </arguments>
                    </block>
                    <block type="Mage_Backend_Block_Widget_Grid_ColumnSet" as="grid.columnSet">
                        <arguments>
                            <id>lockedAdminsGrid</id>
                        </arguments>
                        <block type="Mage_Backend_Block_Widget_Grid_Column" as="user_id">
                            <arguments>
                                <header translate="true" module="Enterprise_Pci">ID</header>
                                <width>50px</width>
                                <type>number</type>
                                <filter>0</filter>
                                <id>user_id</id>
                                <index>user_id</index>
                            </arguments>
                        </block>
                        <block type="Mage_Backend_Block_Widget_Grid_Column" as="username">
                            <arguments>
                                <header translate="true" module="Enterprise_Pci">Username</header>
                                <type>text</type>
                                <id>username</id>
                                <index>username</index>
                            </arguments>
                        </block>
                        <block type="Mage_Backend_Block_Widget_Grid_Column" as="last_login">
                            <arguments>
                                <header translate="true" module="Enterprise_Pci">Last login</header>
                                <type>datetime</type>
                                <filter>0</filter>
                                <id>last_login</id>
                                <index>logdate</index>
                            </arguments>
                        </block>
                        <block type="Mage_Backend_Block_Widget_Grid_Column" as="failures_num">
                            <arguments>
                                <header translate="true" module="Enterprise_Pci">Failures</header>
                                <filter>0</filter>
                                <id>failures_num</id>
                                <index>failures_num</index>
                            </arguments>
                        </block>
                        <block type="Mage_Backend_Block_Widget_Grid_Column" as="lock_expires">
                            <arguments>
                                <header translate="true" module="Enterprise_Pci">Locked until</header>
                                <type>datetime</type>
                                <filter>0</filter>
                                <id>lock_expires</id>
                                <index>lock_expires</index>
                            </arguments>
                        </block>
                    </block>
                </block>
        </reference>
    </adminhtml_locks_block>
    <adminhtml_locks_grid>
        <update handle="formkey"/>
        <update handle="adminhtml_locks_block"/>
        <container label='Locks Users' name="pci.locks.container" output="1"/>
    </adminhtml_locks_grid>
</layout>
