<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>
<?php
/** @var $this Enterprise_Cms_Block_Adminhtml_Cms_Hierarchy_Manage */
?>
<div id="cms-hierarchy-manage-container" class="hierarchy-manage">
    <div><?php echo $this->getButtonHtml($this->__('Manage Hierarchies'), "$('cms-hierarchy-manage-form').toggle()") ?></div>
    <div class="cms-hierarchy manage-comment"><?php echo $this->__('Allows coping hierarchy tree to other scopes and deleting hierarchy trees from other scopes') ?></div>
    <div id="cms-hierarchy-manage-form" class="cms-hierarchy manage-form" style="display:none;">
        <?php echo $this->getFormHtml() ?>
    </div>
    <script type="text/javascript">
    //<![CDATA[
        function countSelectedScopes()
        {
            var selectedScopes = 0;

            for (var i = 0, len = $('scopes').length; i < len; i++) {
                if ($('scopes').options[i].selected) {
                    selectedScopes++;
                }
            }

            return selectedScopes;
        }

        function submitCopy(obj)
        {
            if (!countSelectedScopes()) {
                alert("<?php echo $this->__("Please select website or store view.") ?>");
                return;
            }

            if (confirm("<?php echo $this->__("Please confirm pages hierarchy changes.\\nAll data that hasn't been saved will be lost.") ?>")) {
                obj.form.action = '<?php echo $this->getCopyHierarchyUrl() ?>';
                obj.form.submit();
            }
        }

        function submitDelete(obj)
        {
            if (!countSelectedScopes()) {
                alert("<?php echo $this->__("Please select website or store view.") ?>");
                return;
            }

            if (confirm("<?php echo $this->__("Are you sure?") ?>")) {
                obj.form.action = '<?php echo $this->getDeleteHierarchiesUrl() ?>';
                obj.form.submit();
            }
        }
    //]]>
    </script>
</div>
