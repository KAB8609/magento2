<?php
/**
 * {license_notice}
 *
 * @category    Saas
 * @package     Saas_PrintedTemplate
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>
<?php
/**
 * @var Saas_PrintedTemplate_Block_Widget_ItemsGrid $this
 */
?>
<?php
    $columnsCollection = $this->getColumns();
    $itemsCollection = $this->getItems();
    $widgetId = $this->getWidgetId();
?>

<?php if ($columnsCollection->getSize() > 0 && (!$this->getHideTableHeader() || !$this->getHideTableBody())) : ?>
<style type="text/css">
    .widget-items-grid {border-collapse: collapse; border: 1px solid #808080;}
    .widget-items-grid .heading-row {border: 1px solid #808080; background-color: #EDEBEB;}
    .widget-items-grid th,
    .widget-items-grid td {padding: 2px 10px;}
    .widget-items-grid td {vertical-align: top;}
    .widget-items-grid .column-heading-name,
    .widget-items-grid .column-heading-sku,
    .widget-items-grid .column-value-name {text-align: left;}
    .widget-items-grid .column-heading-qty,
    .widget-items-grid .column-value-qty,
    .widget-items-grid .column-heading-price,
    .widget-items-grid .column-heading-tax_amount,
    .widget-items-grid .column-heading-tax_rates,
    .widget-items-grid .column-heading-discount,
    .widget-items-grid .column-heading-price_incl_discount,
    .widget-items-grid .column-value-price_incl_discount_excl_tax,
    .widget-items-grid .column-heading-row_total_incl_discount {text-align: center;}
    .widget-items-grid .column-value-price,
    .widget-items-grid .column-value-tax_amount,
    .widget-items-grid .column-value-tax_rates,
    .widget-items-grid .column-value-discount,
    .widget-items-grid .column-value-price_incl_discount,
    .widget-items-grid .column-value-discount_excl_tax,
    .widget-items-grid .column-value-row_total_incl_discount_excl_tax,
    .widget-items-grid .column-value-row_total_incl_discount {text-align: right;}
    .widget-items-grid .product-row td {padding-top: 10px;}
    .widget-items-grid .option-value-row .column-value-name {padding-left: 20px;}
    .widget-items-grid .product-row .column-value-name .item-option-label,
    .widget-items-grid .product-row .column-value-name .item-option-value {padding: 4px 0 0 0;}
    .widget-items-grid .product-row .column-value-name .item-option-value {padding-left: 10px;}
    .widget-items-grid .product-row {border-top: 1px solid #808080;}
    .widget-items-grid .cell-content, .widget-items-grid .head-content {page-break-inside: avoid;}
    <?php echo $this->getStyle("#$widgetId.widget-items-grid th", 'header') ?>
    <?php echo $this->getStyle("#$widgetId.widget-items-grid td", 'item') ?>
<?php foreach ($columnsCollection as $column) : ?>
    .column-heading-<?php echo $this->escapeHtml($column->getProperty()); ?>,
    .column-value-<?php echo $this->escapeHtml($column->getProperty())?> {width: <?php echo $column->getWidth()?>px}
<?php endforeach; ?>
</style>

<table id="<?php echo $this->getWidgetId() ?>" class="widget-items-grid">
<?php if (!$this->getHideTableHeader()) : ?>
    <tr class="heading-row">
    <?php $i = 0; ?>
    <?php foreach ($columnsCollection as $column) : ?>
        <?php $i++; ?>
        <th class="column-heading-<?php echo $this->escapeHtml($column->getProperty()); ?><?php echo($i == 1 ? ' first' : '') ?><?php echo($i == $columnsCollection->getSize() ? ' last' : '') ?>">
            <div class="head-content"><?php echo $this->escapeHtml($column->getTitle()) ?></div>
        </th>
    <?php endforeach; ?>
    </tr>
<?php endif; ?>

<?php
    if (!$this->getHideTableBody() && count($itemsCollection) > 0) {
        foreach ($itemsCollection as $item) {
            echo $this->renderItem($item);
        }
    }
?>
</table>
<?php endif; ?>

