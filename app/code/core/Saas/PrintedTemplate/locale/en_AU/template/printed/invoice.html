<!--@name Invoice template @-->
<!--@header_height 0 @-->
<!--@footer_height 0 @-->

<style type="text/css">
    .printed-invoice {font-family: arial,helvetica,sans-serif;}

    .header-table {border-collapse: collapse; border: 1px solid #808080; width: 100%}
    .header-table .header {color: #FFFFFF; background-color: #737373; padding: 10px 15px; font-size: 10pt; font-weight: normal;}
    .header-table .addresses-header {background-color: #EDEBEB;}
    .header-table .addresses-header td {border: 1px solid #808080; padding: 10px 15px; font-weight: bold; font-size: 12pt; width: 50%;}
    .header-table .addresses td {padding: 10px 15px; font-size: 10pt; line-height: 1.5;}

    .logo-table {font-size: 8pt;}

    {{if config.store_logo_url}}
        .logo-table th {padding: 10px 10px 10px 0;}
    {{/if}}

    {{if config.store_address}}
        .logo-table td {padding: 5px 10px; border-left: 1px solid #808080;}
    {{/if}}

    .payment-shipping-table {border-collapse: collapse; border: 1px solid #808080; margin-top: 10px; width: 100%}
    .payment-shipping-table .header {background-color: #EDEBEB;}
    .payment-shipping-table .header td {border: 1px solid #808080; padding: 10px 15px; font-weight: bold; font-size: 12pt; width: 50%;}
    .payment-shipping-table .content td {padding: 10px 15px; font-size: 10pt; line-height: 1.5;}

    .items-block {margin-top: 20px;}
    .items-block .widget-items-grid {border-collapse: collapse;}
    .items-block .widget-items-grid .heading-row {border: 1px solid #808080; background-color: #EDEBEB;}
    .items-block .widget-items-grid th,
    .items-block .widget-items-grid td {padding: 2px 15px; vertical-align: top;}
    .items-block .widget-items-grid .column-heading-name,
    .items-block .widget-items-grid .column-heading-sku,
    .items-block .widget-items-grid .column-value-name,
    .items-block .widget-items-grid .column-value-sku {text-align: left;}
    .items-block .widget-items-grid .column-heading-qty,
    .items-block .widget-items-grid .column-value-qty,
    .items-block .widget-items-grid .column-heading-price,
    .items-block .widget-items-grid .column-heading-tax_amount,
    .items-block .widget-items-grid .column-heading-row_total,
    .items-block .widget-items-grid .column-value-price,
    .items-block .widget-items-grid .column-value-tax_amount,
    .items-block .widget-items-grid .column-value-row_total {text-align: right;}
    .items-block .widget-items-grid .column-value-qty,
    .items-block .widget-items-grid .column-value-price,
    .items-block .widget-items-grid .column-value-tax_amount,
    .items-block .widget-items-grid .column-value-row_total {font-weight: bold !important;}
    .items-block .widget-items-grid .product-row td {padding-top: 10px;}
    .items-block .widget-items-grid .option-value-row .column-value-name {padding-left: 20px;}
    .items-block .widget-items-grid .product-row .column-value-name .item-option-label,
    .items-block .widget-items-grid .product-row .column-value-name .item-option-value {padding: 4px 0 0 0;}
    .items-block .widget-items-grid .product-row .column-value-name .item-option-value {padding-left: 5px;}

    .totals {margin-top: 20px; float: right; font: 10pt bold; font-family: arial,helvetica,sans-serif; page-break-inside: avoid;}
    .totals th {text-align: right; padding: 2px;}
    .totals td {text-align: right; width: 105px; padding-right: 15px; font-weight: bold}

    /* Conditional styles  */
    .totals .subtotal_incl_tax {display: {{if config.display_subtotal_incl_tax}}table-row{{else}}none{{/if}};}
    .totals .subtotal_excl_tax {display: {{if config.display_subtotal_excl_tax}}table-row{{else}}none{{/if}};}
    .totals .subtotal_both {display: {{if config.display_subtotal_both}}table-row{{else}}none{{/if}};}
    .totals .discount {display:  {{if invoice.discount_amount_raw}}table-row{{else}}none{{/if}};}
    .totals .gift_cards {display: {{if invoice.gift_cards_amount_raw}}table-row{{else}}none{{/if}};}
    .totals .customer_balance {display: {{if invoice.customer_balance_amount_raw}}table-row{{else}}none{{/if}};}
    .totals .shipping_excl_tax,
    .totals .shipping_incl_tax,
    .totals .shipping_both {display: none}
    {{if invoice.shipping_amount_raw}}
        {{depend config.display_shipping_excl_tax}}.totals .shipping_excl_tax {display: table-row}{{/depend}}
        {{depend config.display_shipping_incl_tax}}.totals .shipping_incl_tax {display: table-row}{{/depend}}
        {{depend config.display_shipping_both}}.totals .shipping_both {display: table-row}{{/depend}}
    {{/if}}
    {{if config.display_tax_with_grand_total}}
        .totals .tax_with_grand_total {display: table-row}
        .totals .grand_total {display: none}
    {{else}}
        .totals .tax_with_grand_total {display: none}
        .totals .grand_total {display: table-row}
    {{/if}}
</style>

<div class="printed-invoice">
{{if order.is_virtual_raw}}

<table class="logo-table">
    <tr>
        <th><img src="{{var config.store_logo_url}}"/></th>
        <td>{{var config.store_address}}</td>
    </tr>
</table>

<table class="header-table">
    <tr>
        <td colspan="2" class="header">
            Tax Invoice # {{var invoice.increment_id}}<br />
            Order # {{var order.increment_id}}<br />
            Order Date: {{var order.created_at}}<br />
        </td>
    </tr>
    <tr class="addresses-header">
        <td>Sold to:</td>
        <td>Payment Method:</td>
    </tr>
    <tr class="addresses">
        <td>
            {{var address_billing.prefix}} {{var address_billing.firstname}} {{var address_billing.middlename}} {{var address_billing.lastname}} {{var address_billing.suffix}}<br/>
            {{depend address_billing.company}}{{var address_billing.company}}<br/>{{/depend}}
            {{var address_billing.street_multiline}}<br/>
            {{var address_billing.city}}{{depend address_billing.region}}, {{var address_billing.region}}{{/depend}}{{depend address_billing.postcode}}, {{var address_billing.postcode}}{{/depend}}<br/>
            {{var address_billing.country}}<br/>
            T: {{var address_billing.telephone}}
            {{depend address_billing.fax}}<br/>F: {{var address_billing.fax}}{{/depend}}
        </td>
        <td>{{var payment.info}}</td>
    </tr>
</table>
{{else}}

<table class="logo-table">
    <tr>
        <th><img src="{{var config.store_logo_url}}"/></th>
        <td>{{var config.store_address}}</td>
    </tr>
</table>

<table class="header-table">
    <tr>
        <td colspan="2" class="header">
            Tax Invoice # {{var invoice.increment_id}}<br />
            Order # {{var order.increment_id}}<br />
            Order Date: {{var order.created_at}}<br />
        </td>
    </tr>
    <tr class="addresses-header">
        <td>Sold to:</td>
        <td>Ship to:</td>
    </tr>
    <tr class="addresses">
        <td>
            {{var address_billing.prefix}} {{var address_billing.firstname}} {{var address_billing.middlename}} {{var address_billing.lastname}} {{var address_billing.suffix}}<br/>
            {{depend address_billing.company}}{{var address_billing.company}}<br/>{{/depend}}
            {{var address_billing.street_multiline}}<br/>
            {{var address_billing.city}}{{depend address_billing.region}}, {{var address_billing.region}}{{/depend}}{{depend address_billing.postcode}}, {{var address_billing.postcode}}{{/depend}}<br/>
            {{var address_billing.country}}<br/>
            T: {{var address_billing.telephone}}
            {{depend address_billing.fax}}<br/>F: {{var address_billing.fax}}{{/depend}}
        </td>
        <td>
            {{var address_shipping.prefix}} {{var address_shipping.firstname}} {{var address_shipping.middlename}} {{var address_shipping.lastname}} {{var address_shipping.suffix}}<br/>
            {{depend address_shipping.company}}{{var address_shipping.company}}<br/>{{/depend}}
            {{var address_shipping.street_multiline}}<br/>
            {{var address_shipping.city}}{{depend address_shipping.region}}, {{var address_shipping.region}}{{/depend}}{{depend address_shipping.postcode}}, {{var address_shipping.postcode}}{{/depend}}<br/>
            {{var address_shipping.country}}<br/>
            T: {{var address_shipping.telephone}}
            {{depend address_shipping.fax}}<br/>F: {{var address_shipping.fax}}{{/depend}}
        </td>
    </tr>
</table>
{{/if}}

{{if order.is_virtual_raw}}{{else}}
<table class="payment-shipping-table">
    <tr class="header">
        <td>Payment Method:</td>
        <td>Shipping Method:</td>
    </tr>
    <tr class="content">
        <td>{{var payment.info}}</td>
        <td>{{var order.shipping_description}}<br />(Total Shipping Charges {{var order.shipping_amount}})</td>
    </tr>
</table>
{{/if}}

<div class="items-block">
    {{widget type="Saas_PrintedTemplate_Block_Widget_ItemsGrid" header_font_family="Arial" header_font_size="10" header_font_bold="0" row_font_family="Arial" row_font_size="10" columns_editor="cGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYxNDgyNTBfMjUwJTVEJTVCcHJvcGVydHklNUQ9bmFtZSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE0ODI1MF8yNTAlNUQlNUJ0aXRsZSU1RD1Qcm9kdWN0cyZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE0ODI1MF8yNTAlNUQlNUJ3aWR0aCU1RD0zNDkmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYxNDgyNTBfMjUwJTVEJTVCc29ydF9vcmRlciU1RD0xJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwNjY2MTcxMjEwXzIxMCU1RCU1QnByb3BlcnR5JTVEPXNrdSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE3MTIxMF8yMTAlNUQlNUJ0aXRsZSU1RD1TS1UmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYxNzEyMTBfMjEwJTVEJTVCd2lkdGglNUQ9MTA5JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwNjY2MTcxMjEwXzIxMCU1RCU1QnNvcnRfb3JkZXIlNUQ9MiZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE5MjM1N18zNTclNUQlNUJwcm9wZXJ0eSU1RD1wcmljZSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE5MjM1N18zNTclNUQlNUJ0aXRsZSU1RD1QcmljZSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE5MjM1N18zNTclNUQlNUJ3aWR0aCU1RD02MCZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjE5MjM1N18zNTclNUQlNUJzb3J0X29yZGVyJTVEPTMmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYyMTQxOThfMTk4JTVEJTVCcHJvcGVydHklNUQ9cXR5JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwNjY2MjE0MTk4XzE5OCU1RCU1QnRpdGxlJTVEPVF0eSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjIxNDE5OF8xOTglNUQlNUJ3aWR0aCU1RD0yNSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjIxNDE5OF8xOTglNUQlNUJzb3J0X29yZGVyJTVEPTQmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYyNDcyNDJfMjQyJTVEJTVCcHJvcGVydHklNUQ9dGF4X2Ftb3VudCZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjI0NzI0Ml8yNDIlNUQlNUJ0aXRsZSU1RD1UYXgmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYyNDcyNDJfMjQyJTVEJTVCd2lkdGglNUQ9NTAmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA2NjYyNDcyNDJfMjQyJTVEJTVCc29ydF9vcmRlciU1RD01JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwNjY2MjU4OTU2Xzk1NiU1RCU1QnByb3BlcnR5JTVEPXJvd190b3RhbCZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjI1ODk1Nl85NTYlNUQlNUJ0aXRsZSU1RD1TdWJ0b3RhbCZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjI1ODk1Nl85NTYlNUQlNUJ3aWR0aCU1RD02MCZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDY2NjI1ODk1Nl85NTYlNUQlNUJzb3J0X29yZGVyJTVEPTY=" entity="$invoice"}}
</div>

<table class="totals">
    <tr class="subtotal_incl_tax">
        <th>Subtotal:</th>
        <td>{{var invoice.subtotal_incl_tax}}</td>
    </tr>
    <tr class="subtotal_excl_tax">
        <th>Subtotal:</th>
        <td>{{var invoice.subtotal}}</td>
    </tr>
    <tr class="subtotal_both">
        <th>Subtotal (Excl. GST):</th>
        <td>{{var invoice.subtotal}}</td>
    </tr>
    <tr class="subtotal_both">
        <th>Subtotal (Incl. GST):</th>
        <td>{{var invoice.subtotal_incl_tax}}</td>
    </tr>
    <tr class="discount">
        <th>Discount:</th>
        <td>–{{var invoice.discount_amount}}</td>
    </tr>
    <tr class="gift_cards">
        <th>Gift Cards:</th>
        <td>–{{var invoice.gift_cards_amount}}</td>
    </tr>
    <tr class="customer_balance">
        <th>Store Credit:</th>
        <td>–{{var invoice.customer_balance_amount}}</td>
    </tr>
    <tr class="shipping_excl_tax">
        <th>Shipping:</th>
        <td>{{var invoice.shipping_amount}}</td>
    </tr>
    <tr class="shipping_incl_tax">
        <th>Shipping:</th>
        <td>{{var invoice.shipping_incl_tax}}</td>
    </tr>
    <tr class="shipping_both">
        <th>Shipping (Excl. GST):</th>
        <td>{{var invoice.shipping_amount}}</td>
    </tr>
    <tr class="shipping_both">
        <th>Shipping (Incl. GST):</th>
        <td>{{var invoice.shipping_incl_tax}}</td>
    </tr>
    <tr class="grand tax_with_grand_total">
        <th>Grand Total (Excl. GST):</th>
        <td>{{var invoice.grand_total_excl_tax}}</td>
    </tr>
    <tr>
        <th>GST:</th>
        <td>{{var invoice.tax_amount}}</td>
    </tr>
    <tr class="grand tax_with_grand_total">
        <th>Grand Total (Incl. GST):</th>
        <td>{{var invoice.grand_total}}</td>
    </tr>
    <tr class="grand grand_total">
        <th>Grand Total:</th>
        <td>{{var invoice.grand_total}}</td>
    </tr>
</table>

</div>

<style type="text/css">
    .widget-items-grid,
    .widget-items-grid .product-row {border: none;}

    .widget-items-grid {width: 100%}
    .widget-items-grid .column-heading-name {width: auto}
</style>
