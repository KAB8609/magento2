<!--@name Modèle de facture Française @-->
<!--@header_height 0 @-->
<!--@footer_height 0 @-->

<style type="text/css">
    body {font-family: arial, helvetica, sans-serif; font-size: 10pt;}
    h1 {text-transform: uppercase; clear: both; padding-top: 1em; width: 100%; text-align: center;}    
    
    .company-info {float: left;}
    .customer-address {float: right; clear: right; text-align: right; margin-bottom: 1em;}
    
    .invoice-ids {font-size: 100%; text-transform: uppercase; padding: 0 .25em 0.7em 0.25em;}
    .invoice-ids dt {font-weight: bold; float: left; margin: 0 0.3em; padding: 0;}
    .invoice-ids dd {float: left; margin: 0; margin-right: 0.5em; padding: 0;}
    
    .taxes-widget {float: left; margin-top:20px; page-break-inside: avoid;}
    .taxes-widget div {padding: 0.25em 0.6em; text-align: center; font-weight: bold; border: 1px solid #808080; border-bottom: none; background-color: #EDEBEB; }
    
    .header-table {width: 100%;}
    .header-table td {vertical-align: top;}
    .header-table .company-info-block {line-height: 1.5;}
    .header-table .customer-info-block {text-align: right; margin-right: 8px; line-height: 1.5;}
    
    .paid-by {float: right; clear: right; padding: 0.6em;}
    
    .totals {float: right; border-collapse: collapse; margin-top:20px; page-break-inside: avoid;}
    .totals td, .totals th {border: 1px solid #808080;}
    .totals td {text-align: right;}
    .totals th {text-align: left; font-weight: normal;}
    .totals .grand {background-color: #EDEBEB; font-weight: bold;}
    .totals .grand th {font-weight: bold;} 

</style>

<div class="company-info">
    Nom de l'entrepreneur (entreprise individuelle)<br />
    ou dénomination sociale (société)<br />
    Forme et capital (société)<br />
    {{config path="general/store_information/address"}}<br />
    N° Siren - RCS (ou RM) - Ville<br />
    N° identification à la TVA<br />
    Code NAF
</div>

 <div class="customer-address">
    <strong>Adresse de facturation :</strong><br />
    {{var address_billing.prefix}} {{var address_billing.firstname}} {{var address_billing.middlename}} {{var address_billing.lastname}} {{var address_billing.suffix}}<br/>
    {{depend address_billing.company}}{{var address_billing.company}}<br/>{{/depend}}
    {{var address_billing.street_multiline}}<br/>
    {{var address_billing.city}}{{depend address_billing.region}}, {{var address_billing.region}}{{/depend}}{{depend address_billing.postcode}}, {{var address_billing.postcode}}{{/depend}}<br/>
    {{var address_billing.country}}<br/>
    Tél.: {{var address_billing.telephone}}
    {{depend address_billing.fax}}<br/>F: {{var address_billing.fax}}{{/depend}}
    {{if order.is_virtual_raw}}{{depend customer.customer_taxvat}}N° identification à la TVA du client:&nbsp;{{var customer.customer_taxvat}}{{/depend}}{{/if}}
</div>

{{if order.is_virtual_raw}}{{else}}
<div class="customer-address">
    <strong>Adresse de livraison :</strong><br />
    {{var address_shipping.prefix}} {{var address_shipping.firstname}} {{var address_shipping.middlename}} {{var address_shipping.lastname}} {{var address_shipping.suffix}}<br/>
    {{depend address_shipping.company}}{{var address_shipping.company}}<br/>{{/depend}}
    {{var address_shipping.street_multiline}}<br/>
    {{var address_shipping.city}}{{depend address_shipping.region}}, {{var address_shipping.region}}{{/depend}}{{depend address_shipping.postcode}}, {{var address_shipping.postcode}}{{/depend}}<br/>
    {{var address_shipping.country}}<br/>
    Tél.: {{var address_shipping.telephone}}
    {{depend address_shipping.fax}}<br/>F: {{var address_shipping.fax}}{{/depend}}
    {{depend customer.customer_taxvat}}<br/>N° identification à la TVA du client:&nbsp;{{var customer.customer_taxvat}}{{/depend}}
</div>
{{/if}}

<h1>Facture</h1>

<dl class="invoice-ids">
    <dt>Date de la commande :</dt>
        <dd>{{var order.created_at}}</dd>
    <dt>Date de facture :</dt>
        <dd>{{var invoice.created_at}}</dd>
    <dt>Facture N° :</dt>
        <dd>{{var invoice.increment_id}}</dd>
</dl>

{{widget type="saas_printedtemplate/widget_itemsGrid" header_font_family="Arial" header_font_size="10" header_font_bold="1" row_font_family="Arial" row_font_size="10" columns_editor="cGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAyMDkxMTFfMTExJTVEJTVCcHJvcGVydHklNUQ9bmFtZSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDIwOTExMV8xMTElNUQlNUJ0aXRsZSU1RD1EJUMzJUE5c2lnbmF0aW9uJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMjA5MTExXzExMSU1RCU1QndpZHRoJTVEPTMxNSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDIwOTExMV8xMTElNUQlNUJzb3J0X29yZGVyJTVEPTEmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAyNTc0MzJfNDMyJTVEJTVCcHJvcGVydHklNUQ9cXR5JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMjU3NDMyXzQzMiU1RCU1QnRpdGxlJTVEPVF0JUMzJUE5JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMjU3NDMyXzQzMiU1RCU1QndpZHRoJTVEPTMwJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMjU3NDMyXzQzMiU1RCU1QnNvcnRfb3JkZXIlNUQ9MiZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDI4NDQyNl80MjYlNUQlNUJwcm9wZXJ0eSU1RD1wcmljZSZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDI4NDQyNl80MjYlNUQlNUJ0aXRsZSU1RD1Qcml4JTIwdW5pdGFpcmUlMjBicnV0JTIwSFQmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAyODQ0MjZfNDI2JTVEJTVCd2lkdGglNUQ9ODAmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAyODQ0MjZfNDI2JTVEJTVCc29ydF9vcmRlciU1RD0zJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMzU3ODIzXzgyMyU1RCU1QnByb3BlcnR5JTVEPWRpc2NvdW50X2V4Y2xfdGF4JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMzU3ODIzXzgyMyU1RCU1QnRpdGxlJTVEPVJlbWlzZXMmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAzNTc4MjNfODIzJTVEJTVCd2lkdGglNUQ9NjAmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAzNTc4MjNfODIzJTVEJTVCc29ydF9vcmRlciU1RD00JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwMzc2NzA2XzcwNiU1RCU1QnByb3BlcnR5JTVEPXByaWNlX2luY2xfZGlzY291bnRfZXhjbF90YXgmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAzNzY3MDZfNzA2JTVEJTVCdGl0bGUlNUQ9UHJpeCUyMHVuaXRhaXJlJTIwbmV0JTIwSFQmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAzNzY3MDZfNzA2JTVEJTVCd2lkdGglNUQ9ODAmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzAzNzY3MDZfNzA2JTVEJTVCc29ydF9vcmRlciU1RD01JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwNDUzMTIxXzEyMSU1RCU1QnByb3BlcnR5JTVEPXRheF9yYXRlcyZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDQ1MzEyMV8xMjElNUQlNUJ0aXRsZSU1RD1UYXV4JTIwVFZBJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwNDUzMTIxXzEyMSU1RCU1QndpZHRoJTVEPTUwJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwNDUzMTIxXzEyMSU1RCU1QnNvcnRfb3JkZXIlNUQ9NiZwYXJhbWV0ZXJzJTVCY29sdW1uc19lZGl0b3IlNUQlNUJfMTMyMDgzMDUwODA0Nl80NiU1RCU1QnByb3BlcnR5JTVEPXJvd190b3RhbF9pbmNsX2Rpc2NvdW50X2V4Y2xfdGF4JnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwNTA4MDQ2XzQ2JTVEJTVCdGl0bGUlNUQ9TW9udGFudCUyMEhUJnBhcmFtZXRlcnMlNUJjb2x1bW5zX2VkaXRvciU1RCU1Ql8xMzIwODMwNTA4MDQ2XzQ2JTVEJTVCd2lkdGglNUQ9ODAmcGFyYW1ldGVycyU1QmNvbHVtbnNfZWRpdG9yJTVEJTVCXzEzMjA4MzA1MDgwNDZfNDYlNUQlNUJzb3J0X29yZGVyJTVEPTc=" entity="$invoice"}}


<div class="taxes-widget">
    <div>Détail de la TVA</div>
    {{widget type="saas_printedtemplate/widget_taxGrid" column_tax_total="Montant HT" column_tax_rate="Taux" column_tax_amount="Montant TVA" entity="$invoice" header_font_family="sans_serif" header_font_size="10" header_font_bold="1" row_font_family="sans_serif" row_font_size="10"}}
</div>
                
<table class="totals">
    <tr>
        <th>Total HT</th>
        <td>{{var invoice.subtotal}}</td>
    </tr>
    <tr style="display:{{if invoice.discount_amount_raw}}table-row{{else}}none{{/if}};">
        <th>Remises</th>
        <td>–{{var invoice.discount_amount_without_tax}}</td>
    </tr>
    <tr style="display:{{if invoice.gift_cards_amount_raw}}table-row{{else}}none{{/if}};">
        <th>Cartes-cadeaux</th>
        <td>–{{var invoice.gift_cards_amount}}</td>
    </tr>
    <tr style="display:{{if invoice.customer_balance_amount_raw}}table-row{{else}}none{{/if}};">
        <th>Crédit de magasin</th>
        <td>–{{var invoice.customer_balance_amount}}</td>
    </tr>
    <tr style="display:{{if invoice.shipping_amount_raw}}table-row{{else}}none{{/if}};">
        <th>Frais d'expédition {{if invoice.shipping_tax_rate}}({{var invoice.shipping_tax_rate}}){{/if}}</th>
        <td>{{var invoice.shipping_amount}}</td>
    </tr>
    <tr>
        <th>Total net HT</th>
        <td>{{var invoice.grand_total_excl_tax_without_discount_tax}}</td>
    </tr>
    <tr>
        <th>Total TVA</th>
        <td>{{var invoice.tax_amount_without_discount}}</td>
    </tr>
    <tr class="grand">
        <th>Total TTC</th>
        <td>{{var invoice.grand_total}}</td>
    </tr>
</table>
    
<div class="paid-by">{{if payment.isMethodUsed('cashondelivery')}}Le paiement doit être réalisé en espèces à la livraison.{{else}}Réglé par {{var payment.name}} : {{var invoice.grand_total}}{{/if}}</div>

<style type="text/css">

    th, td,
    .widget-items-grid th, .widget-items-grid td,
    .tax_grid_widget th, .tax_grid_widget td  {padding: 0.25em 0.6em;}

    th {font-weight: bold; text-align: center; vertical-align: middle;}
    
    .tax_grid_widget {width: auto;}
    .tax_grid_widget th {background-color: transparent;}
    .widget-items-grid {width: 100%}
    .totals-table {width: auto; float: right;}
    .column-heading-name, .column-value-name {width: auto;}
}

</style>
