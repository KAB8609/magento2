<?php
/**
 * {license_notice}
 *
 * @category    design
 * @package     default_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
 /** @var $this Mage_Adminhtml_Block_Catalog_Product_Helper_Form_Gallery_Content */
$elementName = $this->getElement()->getName() . '[images]';
?>
<div id="<?php echo $this->getHtmlId() ?>"
     data-mage-init="{'productGallery':{template:'#<?php echo $this->getHtmlId() ?>-template'}}"
     data-images="<?php echo $this->escapeHtml($this->getImagesJson()) ?>"
     data-types="<?php echo $this->escapeHtml(
         $this->helper('Mage_Core_Helper_Data')->jsonEncode($this->getImageTypes())
     ) ?>"
     >
    <?php foreach ($this->getImageTypes() as $typeData) { ?>
        <input name="<?php echo $this->escapeHtml($typeData['name']) ?>"
               class="image-<?php echo $this->escapeHtml($typeData['code']) ?>"
               type="hidden"
               value="<?php echo $this->escapeHtml($typeData['value']) ?>"/>
    <?php } ?>
    <?php
    if (!$this->getElement()->getReadonly()) {
        echo $this->getUploaderHtml();
    }
    ?>
    <script id="<?php echo $this->getHtmlId() ?>-template" type="text/x-jquery-tmpl">
        <div class="item {{if disabled == 1 }}disabled{{/if}}" id="${file_id}" data-role="image">
            <input type="hidden" name="<?php echo $elementName ?>[${file_id}][position]" value="${position}" class="position"/>
            <input type="hidden" name="<?php echo $elementName ?>[${file_id}][file]" value="${file}"/>
            <input type="hidden" name="<?php echo $elementName ?>[${file_id}][value_id]" value="${value_id}"/>
            <input type="hidden" name="<?php echo $elementName ?>[${file_id}][label]" value="${label}"/>
            <input type="hidden" name="<?php echo $elementName ?>[${file_id}][removed]" value="" class="is-removed"/>

            <span class="remove">&times;</span>

            <div>
                <ul class="type-labels">
                    <?php foreach ($this->getImageTypes() as $typeData) { ?>
                        <li class="type-<?php echo $this->escapeHtml(
                            $typeData['code']
                        ) ?>"><?php echo $this->escapeHtml($typeData['label']) ?></li>
                    <?php } ?>
                </ul>
                <img src="${url}" alt="${label}"/>
            </div>

            <div class="drag-zone">
                <div class="main-control button">
                    <?php echo $this->__('Make main')?>
                </div>
            </div>
        </div>
    </script>
    <script id="<?php echo $this->getHtmlId() ?>-dialog-template"
        type="text/x-jquery-tmpl"
        data-title="Image Options">
        <div>
            <div style="width: 50%; float:right">
                <div>
                    <label><?php echo $this->__('Description')?></label>
                    <textarea placeholder="label"
                              name="<?php echo $elementName ?>[${file_id}][label]">${label}</textarea>
                </div>
                <div class="buttons-group widget-button-split">
                    <label><?php echo $this->__('Role')?></label>
                    <select size="4" multiple="multiple" data-role="type-selector">
                        <?php foreach ($this->getMediaAttributes() as $attribute) { ?>
                            <option class="image-type"
                                value="<?php echo $this->escapeHtml($attribute->getAttributeCode()) ?>">
                                <?php echo $this->escapeHtml($attribute->getFrontendLabel()) ?>
                            </option>
                        <?php } ?>
                    </select>
                </div>
                <div>
                    <label>
                        <input type="checkbox"
                               value="1"
                               name="<?php echo $elementName ?>[${file_id}][disabled]"
                        {{if disabled == 1 }}checked="checked"{{/if}} />
                        <span><?php echo $this->__('Hide from product page')?></span>
                    </label>
                </div>
            </div>
            <div style="width: 50%;">
                <img src="${url}" alt="${label}" style="max-width:90%; max-height:500px" />
                <span class="remove">&times;</span>
            </div>

        </div>
    </script>
</div>
