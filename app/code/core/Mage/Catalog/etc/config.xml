<?xml version="1.0"?>
<config>
    <modules>
        <Mage_Catalog>
            <version>0.1.3</version>
        
            <depends>
                <Mage_Page/>
            </depends>

            <load>
                <all>
                    <models>
                        <catalog>
                            <class>Mage_Catalog_Model_Mysql4</class>
                        </catalog>
                    </models>

                    <resources>
                        <catalog_setup>
                            <connection extends="//core_setup/connection"/>
                            
                            <entities>
                                <category><table>catalog_category</table></category>
                                <category_attribute><table>catalog_category_attribute</table></category_attribute>
                                <category_attribute_value><table>catalog_category_attribute_value</table></category_attribute_value>
                                <category_attribute_set><table>catalog_category_attribute_set</table></category_attribute_set>
                                <category_set><table>catalog_category_set</table></category_set>
                                <category_product><table>catalog_category_product</table></category_product>

                                <product><table>catalog_product</table></product>
                                <product_attribute><table>catalog_product_attribute</table></product_attribute>
                                <product_attribute_set><table>catalog_product_attribute_set</table></product_attribute_set>
                                <product_attribute_in_set><table>catalog_product_attribute_in_set</table></product_attribute_in_set>
                                <product_attribute_group><table>catalog_product_attribute_group</table></product_attribute_group>
                                <product_attribute_in_group><table>catalog_product_attribute_in_group</table></product_attribute_in_group>
                                <product_attribute_int><table>catalog_product_attribute_int</table></product_attribute_int>
                                <product_attribute_decimal><table>catalog_product_attribute_decimal</table></product_attribute_decimal>
                                <product_attribute_varchar><table>catalog_product_attribute_varchar</table></product_attribute_varchar>
                                <product_attribute_text><table>catalog_product_attribute_text</table></product_attribute_text>
                                <product_attribute_date><table>catalog_product_attribute_date</table></product_attribute_date>
                                <product_link><table>catalog_product_link</table></product_link>
                                <product_link_type><table>catalog_product_link_type</table></product_link_type>
                            </entities>
                        </catalog_setup>

                        <catalog_write>
                            <connection extends="//core_write/connection"/>
                            <entities extends="//catalog_setup/entities"/>
                        </catalog_write>

                        <catalog_read>
                            <connection extends="//core_read/connection"/>
                            <entities extends="//catalog_setup/entities"/>
                        </catalog_read>
                    </resources>

                    <priceRuleConditions>
                        <attribute>
                            <class>Mage_Catalog_Price_Rule_Condition_Attribute</class>
                        </attribute>

                        <category>
                            <class>Mage_Catalog_Price_Rule_Condition_Category</class>
                        </category>
                    </priceRuleConditions>

                    <priceRuleActions>
                        <subtotal_percent>
                            <class>Mage_Catalog_Price_Rule_Action_Percent</class>
                        </subtotal_percent>

                        <subtotal_fixed>
                            <class>Mage_Catalog_Price_Rule_Action_Fixed</class>
                        </subtotal_fixed>
                    </priceRuleActions>
                </all>

                <front>
                    <controller>
                        <active>true</active>
                        <frontName>catalog</frontName>
                        <default>true</default>
                    </controller>

                    <blocks>
                        <catalog_category_tree><class>Mage_Catalog_Block_Category_Tree</class></catalog_category_tree>
                        <catalog_category_list><class>Mage_Catalog_Block_Category_List</class></catalog_category_list>
                        <catalog_breadcrumbs><class>Mage_Catalog_Block_Breadcrumbs</class></catalog_breadcrumbs>
                        <catalog_category_view><class>Mage_Catalog_Block_Category_View</class></catalog_category_view>
                        <catalog_product_view><class>Mage_Catalog_Block_Product_View</class></catalog_product_view>
                        <catalog_search_result><class>Mage_Catalog_Block_Product_Search</class></catalog_search_result>
                    </blocks>

                    <events>
                        <initLayout>
                            <observers>
                                <catalog>
                                    <class>Mage_Core_Block</class>
                                    <method>loadJsonFile</method>
                                    <args>
                                        <file>Mage/Catalog/initLayout.json</file>
                                        <module>Mage_Catalog</module>
                                    </args>
                                </catalog>
                            </observers>
                        </initLayout>
                    </events>
                </front>

                <admin>
                    <blocks>
                        <catalog_category_form><class>Mage_Catalog_Block_Admin_Category_Form</class></catalog_category_form>
                    </blocks>

                    <events>
                        <action_preDispatch_default_index_index>
                            <observers>
                                <catalog>
                                    <class>Mage_Core_Block</class>
                                    <method>loadJsonFile</method>
                                    <args>
                                        <file>Mage/Catalog/Admin/init.json</file>
                                    </args>
                                </catalog>
                            </observers>
                        </action_preDispatch_default_index_index>
                        <action_preDispatch_mage_catalog_tree_index>
                            <observers>
                                <catalog>
                                    <class>Mage_Core_Block</class>
                                    <method>loadJsonFile</method>
                                    <args>
                                        <file>Mage/Catalog/Admin/testJsAdd.json</file>
                                    </args>
                                </catalog>
                            </observers>
                        </action_preDispatch_mage_catalog_tree_index>
                    </events>
                </admin>
            </load>
        </Mage_Catalog>
    </modules>
</config>