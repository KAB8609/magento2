<script type="text/javascript" language="javascript">
function showCategoryTreeContectMenu(node)
{
    var menuC = new Ext.menu.Menu({
        id : 'mainContext',
        items: [{
                text: 'Show Products'
            }, '-',  {
                text: 'Edit'
            }, {
                text: 'Delete'
            }]
    });
    menuC.show(node.ui.getEl(),'tr-tr');
}
Mage.Collection.get('catalog_tree_root_category').addListener('contextmenu',showCategoryTreeContectMenu);

function moveNode(e) {
    Ext.dump('target_id');
    Ext.dump(e.target.id);
    Ext.dump('point');
    Ext.dump(e.point);
    Ext.dump('srource');
    Ext.dump(e.source.id);
    Ext.dump('drop node');
    Ext.dump(e.dropNode.id);
}
var root = Mage.Collection.get('catalog_tree');
root.addListener('beforenodedrop', moveNode);
</script>
