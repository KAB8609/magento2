<?xml version="1.0"?>
<!--
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design
 * @package    default_default
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://www.magentocommerce.com/license/enterprise-edition
 */
-->

<layout>
<!--
    Custom layout changes to native adminhtml_cms_page_edit handle
-->
    <adminhtml_cms_page_edit_changes>
        <reference name="cms_page_edit_tabs">
            <block type="enterprise_cms/adminhtml_cms_page_edit" anme="cms_page_edit_extender" />
        </reference>
        <reference name="cms_page_edit_tabs">
            <action method="removeTab"><name>content_section</name></action>
            <action method="removeTab"><name>design_section</name></action>
            <action method="removeTab"><name>meta_section</name></action>
            <action method="addTab"><name>versions</name><block>enterprise_cms/adminhtml_cms_page_edit_tab_versions</block></action>
        </reference>
    </adminhtml_cms_page_edit_changes>

<!--
    Grid with versions on tab versions
-->
    <adminhtml_cms_page_versions>
        <remove name="root" />
        <block type="enterprise_cms/adminhtml_cms_page_edit_tab_versions"  output="toHtml" name="cms_page_edit_versions" />
    </adminhtml_cms_page_versions>

<!--
    Revision edit interface
-->
    <adminhtml_cms_page_revision_edit>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_page_revision_edit" name="cms_page_revision_edit">
                <block type="enterprise_cms/adminhtml_cms_page_revision_edit_info" name="revision_info" template="enterprise/cms/page/revision/info.phtml" />
            </block>
        </reference>
        <reference name="left">
            <block type="enterprise_cms/adminhtml_cms_page_revision_edit_tabs" name="cms_page_revision_edit_tabs">
                <action method="addTab"><name>content_section</name><block>enterprise_cms/adminhtml_cms_page_revision_edit_tab_content</block></action>
                <action method="addTab"><name>design_section</name><block>enterprise_cms/adminhtml_cms_page_revision_edit_tab_design</block></action>
                <action method="addTab"><name>meta_section</name><block>enterprise_cms/adminhtml_cms_page_revision_edit_tab_meta</block></action>
                <action method="addTab">
                    <name>version_section</name>
                    <block translate="label title" module="enterprise_cms">
                        <class>ajax</class>
                        <label>Version Information</label>
                        <title>Version Information</title>
                    </block>
                </action>
                <action method="setTabData"><tab>version_section</tab><key>url</key><value>*/*/version</value></action>
            </block>
        </reference>
    </adminhtml_cms_page_revision_edit>

<!--
    Version ajax tab
-->
    <adminhtml_cms_page_revision_version>
        <remove name="root" />
        <block type="enterprise_cms/adminhtml_cms_page_revision_edit_tab_version"  output="toHtml" name="cms_page_revision_edit_version" />
    </adminhtml_cms_page_revision_version>

<!--
    Revision preview page
-->
    <adminhtml_cms_page_revision_preview>
        <reference name="root">
            <action method="setTemplate"><template>enterprise/cms/page/preview.phtml</template></action>
            <block type="enterprise_cms/adminhtml_cms_page_preview_form" name="preview_form" />
            <block type="core/text_list" name="tools" as="tools">
                <block type="enterprise_cms/adminhtml_cms_page_preview_store" name="store_switcher" template="enterprise/cms/page/preview/store.phtml" />
                <block type="enterprise_cms/adminhtml_cms_page_preview_revision" name="revision_switcher" template="enterprise/cms/page/preview/revision.phtml" />
            </block>
        </reference>
    </adminhtml_cms_page_revision_preview>

<!--
    Version edit interface
-->
    <adminhtml_cms_page_version_edit>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_page_version_edit" name="cms_page_version_edit" />
            <block type="enterprise_cms/adminhtml_cms_page_version_edit_revisions" name="cms_page_version_edit_revisions" />
        </reference>
    </adminhtml_cms_page_version_edit>

<!--
    Grid with revisions on version edit page
-->
    <adminhtml_cms_page_version_revisions>
        <remove name="root" />
        <block type="enterprise_cms/adminhtml_cms_page_version_edit_revisions"  output="toHtml" name="cms_page_edit_version_edit_revisions" />
    </adminhtml_cms_page_version_revisions>

    <adminhtml_cms_hierarchy_index>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_hierarchy" name="enterprise_cms_hierarchy" />
        </reference>
    </adminhtml_cms_hierarchy_index>

    <adminhtml_cms_hierarchy_edit>
        <reference name="head">
            <action method="setCanLoadExtJs"><flag>1</flag></action>
        </reference>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_hierarchy_edit" name="enterprise_cms_hierarchy_edit" />
        </reference>
        <reference name="left">
            <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tabs" name="enterprise_cms_hierarchy_edit_tabs">
                <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_general" name="enterprise_cms_hierarchy_edit_tab_general" template="enterprise/cms/hierarchy/tab/general.phtml">
                    <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_general_grid" name="cms_page_general_grid"></block>
                </block>
                <action method="addTab">
                    <name>enterprise_cms_hierarchy_edit_tab_general</name>
                    <block>enterprise_cms_hierarchy_edit_tab_general</block>
                </action>
                <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_pages" name="enterprise_cms_hierarchy_edit_tab_pages" template="enterprise/cms/hierarchy/tab/pages.phtml">
                    <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_pages_grid" name="cms_page_grid"></block>
                </block>
                <action method="addTab">
                    <name>enterprise_cms_hierarchy_edit_tab_pages</name>
                    <block>enterprise_cms_hierarchy_edit_tab_pages</block>
                </action>
            </block>
        </reference>
    </adminhtml_cms_hierarchy_edit>

    <adminhtml_cms_hierarchy_pagegrid>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_pages_grid" name="cms_page_grid"></block>
        </reference>
    </adminhtml_cms_hierarchy_pagegrid>

    <adminhtml_cms_hierarchy_pagegeneralgrid>
        <reference name="content">
            <block type="enterprise_cms/adminhtml_cms_hierarchy_edit_tab_general_grid" name="cms_page_general_grid"></block>
        </reference>
    </adminhtml_cms_hierarchy_pagegeneralgrid>
</layout>
