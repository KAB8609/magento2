<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Enterprise
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php /* @var $this Enterprise_Staging_Block_Manage_Staging_Rollback_Settings_Website */?>
<?php $event            = $this->getEvent(); ?>
<?php $backup          = $this->getBackup(); ?>
<?php $staging          = $this->getStaging(); ?>
<?php $items            = $staging->getItemsCollection(); ?>
<?php $masterWebsites   = $this->getWebsiteCollection(); ?>
<?php $stores           = $this->getAllStoresCollection(); ?>
<?php $stagingWebsites  = $staging->getWebsitesCollection(); ?>
<?php $mapperUsedItems  = $this->getMapper()->getUsedItems(); ?>
<?php $mapperWebSites   = $this->getMapper()->getAllUsedWebsites();?>
 
<?php if ($this->getIsVersionConflict()): ?>
    <div id="messages">
    <ul class="messages">
        <li class="notice-msg">
            <?php echo $this->__('Module version conflict!'); ?>
        </li>            
    </ul>
    </div>
<?php endif; ?>     

<form action="<?php echo $this->getSaveUrl() ?>" method="post" id="enterprise_staging_rollback_form" enctype="multipart/form-data">
<input type="hidden" name="staging_id" value="<?php echo $staging->getId(); ?>">
<input type="hidden" name="backup_id" value="<?php echo $backup->getId(); ?>">
<input type="hidden" name="back" value="1" />

<?php echo $this->getChildhtml('website_store_form');?>

<div id="enterprise_staging_rollback_container" class="grid">

<?php echo $this->getChildHtml('event_form')?>    
<?php echo $this->getBlockHtml('formkey')?>
<?php echo $this->getChildHtml('items') ?>
<?php echo $this->getChildHtml('rollbackGrid') ?>
<?php echo $this->getMainButtonsHtml() ?>
</form>
</div>
<script type="text/javascript">
//<![CDATA[
<?php echo $this->getRollbackJsObjectName() ?> = new Enterprise.Staging.Form('enterprise_staging_rollback_container', 'enterprise_staging_rollback_form', '', '', [],[]);
//]]>
</script>