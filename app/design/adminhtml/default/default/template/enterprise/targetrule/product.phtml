<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design
 * @package    default_default
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="entry-edit">
    <div class="entry-edit-head">
        <h4 class="icon-head head-edit-form fieldset-legend"><?php echo Mage::helper('enterprise_targetrule')->__('Rule-based Settings') ?></h4>
    </div>
        <table cellspacing="0" class="form-list" id="table_catalog_targetrule">
        <tr>
            <td class="label"><label for="<?php echo $this->getFieldName('rule_based_positions'); ?>"><?php echo Mage::helper('enterprise_targetrule')->__('Rule-based Positions') ?></label></td>
            <td class="value"><select id="<?php echo $this->getFieldName('rule_based_positions'); ?>" name="product[<?php echo $this->getFieldName('rule_based_positions'); ?>]" class="select" <?php echo $this->isDefault('rule_based_positions')?'disabled="true"':''; ?>>
            <?php
            foreach ($this->getRuleBasedPositionOptions() as $key=>$value) {
                echo "<option value=\"{$key}\"";
                echo ($key == $this->getRuleBasedPositions())?'selected':'';
                echo ">{$value}</option>";
            }
            ?>
            </select>

            <input type="checkbox" id="<?php echo $this->getFieldName('rule_based_positions'); ?>_default" name="product[<?php echo $this->getFieldName('rule_based_positions'); ?>_default]" value="1" onclick="targetruleSetDefault(this, '<?php echo $this->getFieldName('rule_based_positions'); ?>');" class="checkbox" <?php echo $this->isDefault('rule_based_positions')?'checked':''; ?>/>
            <label for="<?php echo $this->getFieldName('rule_based_positions'); ?>_default" class="normal"><?php echo Mage::helper('enterprise_targetrule')->__('Use Config Settings') ?></label>
            <td class="value scope-label"><?php echo Mage::helper('enterprise_targetrule')->__('[GLOBAL]') ?></td>
        </tr>

        <tr>
            <td class="label"><label for="<?php echo $this->getFieldName('position_behavior'); ?>"><?php echo Mage::helper('enterprise_targetrule')->__('Position Behavior') ?></label></td>
            <td class="value"><input type="text" class="input-text validate-number" id="<?php echo $this->getFieldName('position_behavior'); ?>" name="product[<?php echo $this->getFieldName('position_behavior'); ?>]" value="<?php echo (int)$this->getPositionBehavior();?>" <?php echo $this->isDefault('position_behavior')?'disabled="true"':''; ?>/>
            <input type="checkbox" id="<?php echo $this->getFieldName('position_behavior'); ?>_default" name="product[<?php echo $this->getFieldName('position_behavior'); ?>_default]" value="1" onclick="targetruleSetDefault(this, '<?php echo $this->getFieldName('position_behavior'); ?>');" class="checkbox" <?php echo $this->isDefault('position_behavior')?'checked':''; ?>/>
            <label for="<?php echo $this->getFieldName('position_behavior'); ?>_default" class="normal"><?php echo Mage::helper('enterprise_targetrule')->__('Use Config Settings') ?></label>
            </td>
            <td class="value scope-label"><?php echo Mage::helper('enterprise_targetrule')->__('[GLOBAL]') ?></td>
        </tr>
        </table>
</div>
<script type="text/javascript">
//<![CDATA[
targetruleSetDefault = function (check, elementId) {
    var el = document.getElementById(elementId);
    el.disabled = (check.checked)?true:false;
}
//]]>
</script>
