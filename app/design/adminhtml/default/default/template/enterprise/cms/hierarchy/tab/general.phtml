<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design
 * @package    default_default
 * @copyright  Copyright (c) 2009 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://www.magentocommerce.com/license/enterprise-edition
 */
?>
<?php
/* @var $this Enterprise_Cms_Block_Adminhtml_Cms_Hierarchy_Edit_Tab_General */
?>
<script type="text/javascript">
var hierarchy = {
    initialize: function(){
        this.infoElement    = $('page_id_element');
        this.pageElement    = $('page_id');
        this.gridContainer  = $('cms_page_general_grid_container');
    },
    selectPage: function(){
        this.gridContainer.show();
    },
    resetPage: function(){
        if (confirm('<?php echo $this->__("Are you sure you want to do this?"); ?>')) {
            $('label').value = '';
            $('label').disabled = false;
            $('identifier').value = '';
            $('identifier').disabled = false;

            this.pageElement.value = '';
            this.infoElement.innerHTML = '<?php echo $this->__("Unselected"); ?>';
        }

        this.gridContainer.hide();
    },
    gridRowClick: function(container, event){
        var tr = event.findElement('tr');
        var page_id = tr.down('.page_id').textContent;
        var label = tr.down('.label').textContent;
        var identifier = tr.down('.identifier').textContent;

        this.pageElement.value = page_id;
        this.infoElement.innerHTML = label;

        $('label').value = label;
        $('label').disabled = true;
        $('identifier').value = identifier;
        $('identifier').disabled = true;

        this.gridContainer.hide();
    }
};
</script>

<div class="entry-edit">
    <?php echo $this->getFormHtml() ?>
</div>

<div id="cms_page_general_grid_container" style="display:none;">
    <div class="entry-edit">
        <div class="entry-edit-head">
            <div style="float: right;"><?php echo $this->getPageGridButtonsHtml() ?></div>
            <h4 class="fieldset-legend head-cms-page-grid icon-head"><?php echo $this->__('Please select base Page')?></h4>
        </div>
        <fieldset>
            <?php echo $this->getChildHtml('cms_page_general_grid')?>
        </fieldset>
    <div>
</div>

<script type="text/javascript">
hierarchy.initialize();
</script>