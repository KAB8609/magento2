<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * @category   design_default
 * @package    Mage
 * @copyright  Copyright (c) 2004-2007 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
?>
<?=$this->getAddButtonHtml()?>
<span class="field-row" id="<?=$this->getElement()->getHtmlId()?>_container"></span>
<span id="<?=$this->getElement()->getHtmlId()?>_delete_button" style="display:none"></span>

<div id="<?=$this->getElement()->getHtmlId()?>_add_template" style="display:none">
<div class="tier-price-input" id="<?=$this->getElement()->getHtmlId()?>_row___index__">
<table cellspacing="0" class="field-row">
	<tbody>
	 <tr>
	  	<td class="a-left">
		<strong><?=('Qty')?></strong>&nbsp;
		<input id="'<?=$this->getElement()->getHtmlId()?>_row___index__price_qty'" disabled="no-template" class="<?=$this->getElement()->getClass()?> qty required-entry validate-number validate-greater-than-zero" type="text" name="'<?=$this->getElement()->getName()?>[__index__][price_qty]'" value="'#{qty}'">
		</td>
		<td class="a-left">&nbsp;
		<strong><?=('and above. Price')?></strong>&nbsp;
		<input id="'<?=$this->getElement()->getHtmlId()?>_row___index__price'" disabled="no-template" class="<?=$this->getElement()->getClass()?> price required-entry validate-number validate-greater-than-zero" type="text" name="'<?=$this->getElement()->getName()?>[__index__][price]'" value="'#{price}'">
		</td>
		<td class="a-left">
		<input id="'<?=$this->getElement()->getHtmlId()?>_row___index__delete'" type="hidden" name="'<?=$this->getElement()->getName()?>[__index__][delete]'" value="">
		<?=$this->getDeleteButtonHtml()?>
		</td>
	  </tr>
	</tbody>
</table>
</div>
</div>
<script type="text/javascript">
<!--
	var tierPriceControl = {
		template : new Template($('<?=$this->getElement()->getHtmlId()?>_add_template').innerHTML.replace(/__index__/g, '#{index}').replace(/ disabled="?no-template"?/g, '').replace(/ disabled/g, '').replace(/="'([^']*)'"/g, '="$1"')),
		itemsCount : 0,
		deleteButton: false,
		addItem	 : function () {
			var data = {};
			data.qty = '';
			data.price = '';
			data.index = this.itemsCount++;
			if(arguments.length == 2) {
				data.price = arguments[1];
				data.qty   = arguments[0];
			}
						
			new Insertion.Bottom(
				$('<?=$this->getElement()->getHtmlId()?>_container'),
				this.template.evaluate(data)
			);
		},
		deleteItem : function(item) {
			$('<?=$this->getElement()->getHtmlId()?>_row_' + item).hide();
			if($('<?=$this->getElement()->getHtmlId()?>_row_'+item+'delete')){
			    $('<?=$this->getElement()->getHtmlId()?>_row_'+item+'delete').value=1;
			}
		}
	}
	<?foreach ($this->getValues() as $_item):?>
	tierPriceControl.addItem('<?=$_item['price_qty']?>','<?=$_item['price']?>');
	<?endforeach;?>
//-->
</script>