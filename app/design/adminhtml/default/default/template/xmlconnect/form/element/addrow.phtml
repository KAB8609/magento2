<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<script type="text/javascript">
//<![CDATA[
/**
 * Return innerHTML for TD label
 *
 * @return string
 */
function getTdLabelInnerHtml() {
    return '<span class="field-row"><input type="text" class=" input-text" value="" name="conf[new_pages][labels][]"></span>';
}

/**
 * Return innerHTML for TD Value
 *
 * @return string
 */
function getTdValueInnerHtml() {
    var html = '<span class="field-row"><select class=" select" name="conf[new_pages][ids][]">'
    <?php foreach($this->getOptions() as $page): ?>
        + '<option value="<?php echo $this->jsQuoteEscape($this->htmlEscape($page['value'])); ?>"><?php echo $this->jsQuoteEscape($this->htmlEscape($page['label']));?></option>'
    <?php endforeach; ?>
        + '</select></span>';
    return html;
}

/**
 * Return innerHTML for TD Button
 *
 * @return string
 */
function getTdButtonInnerHtml() {
    return '<button class=" scalable save " onclick="removeTableRow(this)" value="&minus;">'
    +'<span><?php echo Mage::helper('xmlconnect')->__('Delete'); ?></span></button>';
}

/**
 * Delete row from table
 *
 * @return bool;
 */
function removeTableRow(node) {
    node.parentNode.parentNode.parentNode.removeChild(node.parentNode.parentNode);
    return false;
}

/**
 * Insert new row into table
 *
 * @return bool;
 */
function insertNewTableRow(node) {
    var tableNode = node.parentNode.parentNode.parentNode.parentNode;
    var tbodyNode = node.parentNode.parentNode.parentNode;
    /**
     * "-1"  skiping <script> child inside tbody element
     */
    var rowCount = tbodyNode.children.length - 1;
    var newRow = tableNode.insertRow(rowCount);

    var cellLabel = newRow.insertCell(0);
    cellLabel.className = 'label';
    cellLabel.innerHTML = getTdLabelInnerHtml();

    var cellValue = newRow.insertCell(1);
    cellValue.className = 'value';
    cellValue.innerHTML = getTdValueInnerHtml();

    var cellButton = newRow.insertCell(2);
    cellButton.innerHTML = getTdButtonInnerHtml();
    cellButton.className = 'label';
    Element.setStyle(cellButton, { width: '5em'});

    return false;
}

// ]]>
</script>