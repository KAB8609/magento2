<?php
/**
 * {license_notice}
 *
 * @category    design
 * @package     pro_default
 * @copyright   {copyright}
 * @license     {license_link}
 */
?>

<script type="text/javascript">
//<![CDATA[
    function reloadIframe(method) {
        var iframeContainer = $('payment_form_' + method + '_container');
        if (iframeContainer) {
            var hiddenElms = iframeContainer.up('li').select('input');
            if (hiddenElms) {
                hiddenElms.each(function(elm){
                    if (elm) elm.remove();
                });
            }
            toggleContinueButton(iframeContainer.up('ul'));
            new Ajax.Updater(
                iframeContainer,
                "<?php echo $this->getUrl('enterprise_pbridge/pbridge/iframe', array('_current' => true, '_secure' => true)); ?>",
                {parameters : {method_code : method}}
            );
        }
    }
    function toggleContinueButton(target) {
        var buttonsContainer = $('payment-buttons-container');
        if (buttonsContainer && buttonsContainer.down('button.button')) {
            var continueButton = buttonsContainer.down('button.button');
            if (target.type != 'checkbox' || ! target.checked) {
                var checkedRadio = $$('#co-payment-form input[type="radio"][name="payment[method]"]:checked');
                if (checkedRadio.length && checkedRadio[0].match('[value^="pbridge"]')) {
                    return continueButton.setStyle({display:'none'});
                }
            }
            continueButton.setStyle({display:'block'});
        }
    }
//]]>
</script>
