<?
/**
 * Temlate for Mage_Customer_Block_Address_Book block
 * @var $test Mage_Customer_Block_Address_Book
 */
?>
<?=$this->getMessagesBlock()->getGroupedHtml()?>
<table cellspacing="0" width="100%">
    <tr>
        <td style="width:50%;height:100%;"><h3>Default Billing</h3>
            <table width="100%" cellspacing="0"> 
            <?if($_pAddsses = Mage::getSingleton('customer/session')->getCustomer()->getDefaultBilling()):?>    
                <tr>
                    <td>
                    <address>
                        <?=$this->getAddressHtml(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>
                    </address>
                    <p>
                        <strong><a href="<?=$this->getAddressEditUrl(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>" class="red-link">Edit</a></strong>
                    </p>
                    </td>
                </tr>
            <?elseif($_pAddsses = Mage::getSingleton('customer/session')->getCustomer()->getDefaultShipping()):?>    
                <tr>
                    <td>
                    <address>
                        <?=$this->getAddressHtml(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>
                    </address>
                    <p>
                        <strong><a href="<?=$this->getAddressEditUrl(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>" class="red-link">Edit</a></strong>
                    </p>
                    </td>
                </tr>
            <?else:?>
                <tr>
                    <td>
                        <p>You have no default billing address in your address book.</p>
                    </td>
                </tr>
            <?endif?>
            </table>
        </td>
        <td style="width:50%;" rowspan="2"><h3>Additional Entries</h3>
            <table width="100%" cellspacing="0"> 
            <?if($_pAddsses = $this->getAdditionalAddresses()):?>    
                <?foreach($_pAddsses as $_address):?>
                <tr>
                    <td>
                    <address>
                        <?=$this->getAddressHtml($_address)?>
                    </address>
                    <p>
                        <strong><a href="<?=$baseUrl?>customer/address/edit/id/<?=$_address->getId()?>/" class="red-link">Edit</a></strong><span class="separator">&nbsp;|&nbsp;</span><strong><a href="#" onclick="return deleteAddress('<?=$_address->getId()?>');" class="red-link">Delete</a></strong>
                    </p>
                    </td>
                </tr>
                <?endforeach;?>
            <?else:?>
                <tr>
                    <td>
                        <p>You have no additional entries in your address book.</p>
                    </td>
                </tr>
            <?endif?>
            </table>
        </td>
    </tr>
    <tr>
        <td style="width:50%;" valign="top"><h3>Default Shipping</h3>
            <table width="100%" cellspacing="0"> 
            <?if($_pAddsses = Mage::getSingleton('customer/session')->getCustomer()->getDefaultShipping()):?>    
                <tr>
                    <td>
                    <address>
                        <?=$this->getAddressHtml(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>
                    </address>
                    <p>
                        <strong><a href="<?=$this->getAddressEditUrl(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>" class="red-link">Edit</a></strong>
                    </p>
                    </td>
                </tr>
            <?elseif($_pAddsses = Mage::getSingleton('customer/session')->getCustomer()->getDefaultBilling()):?>    
                <tr>
                    <td>
                    <address>
                        <?=$this->getAddressHtml(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>
                    </address>
                    <p>
                        <strong><a href="<?=$this->getAddressEditUrl(Mage::getSingleton('customer/session')->getCustomer()->getAddressById($_pAddsses))?>" class="red-link">Edit</a></strong>
                    </p>
                    </td>
                </tr>
            <?else:?>
                <tr>
                    <td>
                        <p>You have no default shipping address in your address book.</p>
                    </td>
                </tr>
            <?endif?>
            </table>
        </td>
    </tr>
</table>
<div class="buttons-container">
    <a href="<?=$this->getBackUrl()?>" class="float-left">&laquo; Back</a>
    <input type="button" onclick="window.location='<?=$this->getAddAddressUrl()?>';" value="New Address" class="input-button">
</div>
<script type="text/javascript">
    function deleteAddress(addressId) {
        if(confirm('Do you whant delete address?')) {
            window.location='<?=$this->getDeleteUrl()?>id/'+addressId;
        }
        return false;
    }
</script>
