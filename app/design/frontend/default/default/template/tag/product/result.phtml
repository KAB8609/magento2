<?if( $this->getTagInfo()->getName() ):?>
    <div class="page-head">
    	<h3><?=__('Products tagged with \'%s\'', $this->getTagInfo()->getName())?></h3>
    </div>
<?endif;?>
<?if( sizeof($this->getProducts()) > 0 ):?>
    <?=$this->getToolbarHtml()?>
    <?if($this->getMode()!='grid'):?>
    <!-- [starts] .listing-type-list // -->
    <div class="listing-type-list catalog-listing"> <!-- the class name will change to .listing-type-cell if viewing in list mode -->
        <?$i=0; foreach ($this->getProducts() as $product):?>
    	    <div class="listing-item <?if ($this->getCount()<$i+3):?> class="last"<?endif?>">
    		    <div class="product-image">
    			    <a href="<?=$product->getProductUrl()?>" title="<?=$product->getName()?>"><img src="<?=$product->getSmallImageUrl()?>" width="125" height="125" alt="<?=$product->getName()?>"/></a>
    		    </div>
    		    <div class="product-shop">
    			    <h5><a href="<?=$product->getProductUrl()?>" title="<?=$product->getName()?>"><?=$product->getName()?></a></h5>
    					<?=$this->getHelper('review/helper')->getSummaryHtml($product)?>
    					<?=$this->getHelper('catalog/product')->getPriceHtml($product)?>
    					<button class="form-button" onclick="top.location.href='<?=$this->getUrl('checkout/cart/add',array('product'=>$product->getId()))?>'"><span>Add to Cart</span></button>
    					<div class="description"><?=$product->getDescription()?> <a href="<?=$product->getProductUrl()?>" title="<?=$product->getName()?>"><small>Learn More</small></a></div>
							<p class="add-to"><a href="<?=$this->getUrl('wishlist/index/add',array('product'=>$product->getId()))?>" class="link-cart">Add to Wishlist</a>
        <?if($this->getCompareJsObjectName()):?><span class="pipe">|</span><a href="#" onclick="<?=$this->getCompareJsObjectName()?>.addItem(<?=$product->getId()?>);return false;">Add to Compare</a><?endif;?>
        </p>
    				</div>
    			</div>
        <?endforeach;?>
    </div>
    <!-- [ends] .listing-type-list // -->
    <?else:?>
    <!-- [starts] .listing-type-grid // -->
	<div class="listing-type-grid  catalog-listing"> <!-- the class name will change to .listing-type-cell if viewing in list mode -->
	    <table cellspacing="0" class="generic-product-grid">
		    <?$i=0; foreach ($this->getProducts() as $product):?>
			<?if ($i++%3==0):?><tr<?if ($this->getCount()<$i+3):?> class="last"<?endif?>><?endif?>
								<td<?if ($i%3==0):?> class="last"<?endif?>>
									<p class="product-image"><a href="<?=$product->getProductUrl()?>" title="<?=$product->getName()?>"><img src="<?=$product->getSmallImageUrl()?>" width="135" alt="<?=$product->getName()?>"></a></p>
									<h5><a href="<?=$product->getProductUrl()?>" title="<?=$product->getName()?>"><?=$product->getName()?></a></h5>
									<?=$this->getHelper('review/helper')->getSummaryHtml($product)?>
									<?=$this->getHelper('catalog/product')->getPriceHtml($product)?>
									<button class="form-button" onclick="top.location.href='<?=$this->getUrl('checkout/cart/add',array('product'=>$product->getId()))?>'"><span>Add to Cart</span></button>
									<div class="clear"></div>
									<p class="add-to">
										<?if($this->getCompareJsObjectName()):?>
											<strong>Add to:</strong><br/><a href="<?=$this->getUrl('wishlist/index/add',array('product'=>$product->getId()))?>">Wishlist</a><span class="pipe">|</span><a href="#" onclick="<?=$this->getCompareJsObjectName()?>.addItem(<?=$product->getId()?>);return false;">Compare</a>
										<?else:?>
											<a href="<?=$this->getUrl('wishlist/index/add',array('product'=>$product->getId()))?>">Add to Wishlist</a>
										<?endif;?>
									</p>
								</td>

			<?if ($i%3==0):?></tr><?endif?>
			<?endforeach?>
            <?for($i;$i%3!=0;$i++):?>
            <td class="empty-product"></td>
            <?endfor?>
		</table>
	</div>
<!-- [ends] .listing-type-grid // -->
    <?endif;?>
        <?=$this->getToolbarHtml()?>
    <?else:?>
    <table class="data-table box-table" cellspacing="0">
        <tr class="odd">
            <td><center><small><?=__('Unable to find any products')?></small></center></td>
        </tr>
    </table>
<?endif;?>
