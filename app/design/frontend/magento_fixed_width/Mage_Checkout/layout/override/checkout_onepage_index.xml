<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->
<layout version="0.1.0">
    <checkout_onepage_index translate="label" type="page" parent="default">
        <label>One Page Checkout</label>
        <reference name="root">
            <action method="setTemplate">
                <template>1column.phtml</template>
            </action>
        </reference>
        <reference name="head">
            <action method="addJs">
                <file>Mage_Checkout::js/opcheckout.js</file>
            </action>
        </reference>
        <reference name="content">
            <block type="Mage_Checkout_Block_Onepage" name="checkout.onepage" template="onepage.phtml">
                <block type="Mage_Cms_Block_Block" name="checkout.callout" as="checkoutCallout">
                    <action method="setBlockId">
                        <block_id>checkout_callout</block_id>
                    </action>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Progress" as="checkoutProgress" name="checkout.progress" template="onepage/progress.phtml"/>
                <block type="Mage_Checkout_Block_Onepage_Login" name="checkout.onepage.login" as="login" template="onepage/login.phtml">
                    <container name="checkout.onepage.login.before" as="login_before" label="Login/Registration Before" htmlTag="div"/>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Billing" name="checkout.onepage.billing" as="billing" template="onepage/billing.phtml">
                    <block type="Enterprise_Customer_Block_Form" template="form/userattributes.phtml" name="customer_form_customer_user_defined_attributes">
                        <action method="setFormCode">
                            <code>checkout_register</code>
                        </action>
                    </block>
                    <block type="Enterprise_Customer_Block_Form" template="form/userattributes.phtml" name="customer_form_billing_address_user_defined_attributes">
                        <action method="setFormCode">
                            <code>customer_register_address</code>
                        </action>
                    </block>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Shipping" name="checkout.onepage.shipping" as="shipping" template="onepage/shipping.phtml">
                    <block type="Enterprise_Customer_Block_Form" template="form/userattributes.phtml" name="customer_form_shipping_address_user_defined_attributes">
                        <action method="setFormCode">
                            <code>customer_register_address</code>
                        </action>
                    </block>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Shipping_Method" name="checkout.onepage.shipping_method" as="shipping_method" template="onepage/shipping_method.phtml">
                    <block type="Mage_Checkout_Block_Onepage_Shipping_Method_Available" name="checkout.onepage.shipping_method.available" as="available" template="onepage/shipping_method/available.phtml"/>
                    <block type="Mage_Checkout_Block_Onepage_Shipping_Method_Additional" name="checkout.onepage.shipping_method.additional" as="additional" template="onepage/shipping_method/additional.phtml"/>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Payment" name="checkout.onepage.payment" as="payment" template="onepage/payment.phtml">
                    <block type="Mage_Checkout_Block_Onepage_Payment_Methods" name="checkout.payment.methods" as="methods" template="onepage/payment/methods.phtml">
                        <action method="setMethodFormTemplate">
                            <method>purchaseorder</method>
                            <template>Mage_Payment::form/purchaseorder.phtml</template>
                        </action>
                    </block>
                    <block type="Mage_Core_Block_Template" name="checkout.onepage.payment.additional" as="additional"/>
                    <block type="Mage_Core_Block_Template" name="checkout.onepage.payment.methods_additional" as="methods_additional"/>
                </block>
                <block type="Mage_Checkout_Block_Onepage_Review" name="checkout.onepage.review" as="review" template="onepage/review.phtml"/>
            </block>
        </reference>
        <update handle="customer_form_template_handle"/>
    </checkout_onepage_index>
</layout>
