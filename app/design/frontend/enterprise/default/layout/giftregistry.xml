<?xml version="1.0"?>
<!--
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2009 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */

-->
<layout version="0.1.0">
    <checkout_cart_index>
        <reference name="checkout.cart.methods">
            <block type="enterprise_giftregistry/cart_link" name="giftregistry.cart.link" template="giftregistry/cart/link.phtml"/>
        </reference>
    </checkout_cart_index>

   <wishlist_index_index>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/wishlist_view" name="customer.wishlist" template="giftregistry/wishlist/view.phtml"/>
        </reference>
    </wishlist_index_index>

    <enterprise_giftregistry_index_index>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_list" name="giftregistry.customer.list" template="giftregistry/customer/list.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_index>

    <enterprise_giftregistry_index_view>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_view" name="giftregistry.customer.view" template="giftregistry/customer/view.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_view>

    <enterprise_giftregistry_index_share>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_share" name="giftregistry.customer.share" template="giftregistry/customer/share.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_share>

    <enterprise_giftregistry_index_items>
        <update handle="customer_account"/>
        <reference name="customer_account_navigation">
            <action method="setActive"><path>enterprise_giftregistry/index/index</path></action>
        </reference>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_items" name="giftregistry.customer.items" template="giftregistry/customer/items.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_items>

     <customer_account>
        <block type="enterprise_giftregistry/link" name="giftregistry_link_dashboard">
            <action method="addDashboardLink" translate="label" module="enterprise_giftregistry">
                <block>customer_account_navigation</block><name>giftregistry</name><path>enterprise_giftregistry/</path><label>Gift Registry</label>
            </action>
        </block>
    </customer_account>

    <default>
        <reference name="left">
            <block type="enterprise_giftregistry/search_quick" name="giftregistry.quick.search" template="giftregistry/search/quick.phtml"></block>
        </reference>
    </default>

    <enterprise_giftregistry_search_index>
        <update handle="calendar"/>
        <reference name="left">
            <remove name="giftregistry.quick.search" />
        </reference>
        <reference name="content">
            <block type="enterprise_giftregistry/search_form" name="giftregistry.search.form" template="giftregistry/search/form.phtml"></block>
        </reference>
    </enterprise_giftregistry_search_index>

    <enterprise_giftregistry_search_advanced>
        <block type="enterprise_giftregistry/search_advanced" name="root" template="giftregistry/search/advanced.phtml"></block>
    </enterprise_giftregistry_search_advanced>

    <calendar>
        <reference name="head">
            <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/></action>
            <action method="addItem"><type>js</type><name>calendar/calendar.js</name></action>
            <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name></action>
        </reference>
        <reference name="content">
            <block type="core/html_calendar" name="html_calendar" as="html_calendar" template="page/js/calendar.phtml"/>
        </reference>
    </calendar>

    <enterprise_giftregistry_index_addselect translate="label">
        <label>Customer My Account GiftRegistry Add</label>
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_edit" name="giftregistry_addselect" template="giftregistry/edit/addselect.phtml"></block>
        </reference>
    </enterprise_giftregistry_index_addselect>

    <enterprise_giftregistry_index_edit translate="label">
        <label>Customer My Account GiftRegistry Edit</label>
        <update handle="customer_account"/>
        <update handle="calendar"/>
        <reference name="my.account.wrapper">
            <block type="enterprise_giftregistry/customer_edit" name="giftregistry_edit" template="giftregistry/edit/edit.phtml">
                <action method="addInputTypeTemplate"><type>text</type><template>giftregistry/attributes/text.phtml</template></action>
                <block type="enterprise_giftregistry/customer_edit_registry" name="giftregistry_edit_registry" template="giftregistry/edit/registry.phtml"/>
                <block type="enterprise_giftregistry/customer_edit_registrants" name="giftregistry_edit_registrants" template="giftregistry/edit/registrants.phtml"/>
                <block type="enterprise_giftregistry/customer_address_edit" name="giftregistry_address_edit" template="giftregistry/address/edit.phtml"/>
            </block>
        </reference>
    </enterprise_giftregistry_index_edit>
</layout>
