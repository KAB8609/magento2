<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Enterprise_GiftCardAccount
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
-->
<layout version="0.1.0">
    <checkout_cart_index>
        <reference name="checkout.cart">
            <block type="enterprise_giftcardaccount/checkout_cart_giftcardaccount" template="giftcardaccount/cart/block.phtml" name="checkout.cart.giftcardaccount" as="giftcards" />
        </reference>
    </checkout_cart_index>

    <enterprise_giftcardaccount_cart_check>
        <reference name="content">
            <block type="enterprise_giftcardaccount/checkout_cart_check" template="giftcardaccount/cart/check.phtml" name="check" />
        </reference>
    </enterprise_giftcardaccount_cart_check>

    <sales_order_view>
        <reference name="order_items">
            <block type="enterprise_giftcardaccount/sales_order_giftcards" name="giftcards" template="giftcardaccount/order/giftcards.phtml" />
        </reference>
    </sales_order_view>
    <sales_order_print>
        <reference name="sales.order.print">
            <block type="enterprise_giftcardaccount/sales_order_giftcards" name="giftcards" template="giftcardaccount/order/giftcards.phtml" />
        </reference>
    </sales_order_print>

    <checkout_onepage_index>
        <reference name="checkout.onepage.payment.additional">
            <block type="enterprise_giftcardaccount/checkout_onepage_payment_additional" template="giftcardaccount/onepage/payment/additional.phtml" name="giftcardaccount" />
        </reference>
    </checkout_onepage_index>

    <!-- enterprise_customerbalance_info_index>
        <reference name="customerbalance.wrapper">
        </reference>
    </enterprise_customerbalance_info_index -->

    <checkout_onepage_paymentmethod>
        <reference name="checkout.onepage.payment.methods.scripts">
            <block type="enterprise_giftcardaccount/checkout_onepage_payment_additional" template="giftcardaccount/onepage/payment/scripts.phtml" name="giftcardaccount_scripts" />
        </reference>
    </checkout_onepage_paymentmethod>

    <enterprise_giftcardaccount_redeem_index>
        <update handle="customer_account"/>

        <reference name="content">
            <block type="enterprise_giftcardaccount/account_redeem" name="redeem" template="giftcardaccount/account/redeem.phtml" />
        </reference>
    </enterprise_giftcardaccount_redeem_index>

    <customer_account>
        <reference name="customer_account_navigation">
            <action method="addLink" translate="label" module="enterprise_giftcardaccount">
                <name>enterprise_giftcardaccount</name>
                <path>enterprise_giftcardaccount/redeem/</path>
                <label>Redeem Gift Card</label>
            </action>
        </reference>
    </customer_account>
    
    <enterprise_customerbalance_info_index>
        <reference name="customerbalance.wrapper">
            <block type="enterprise_giftcardaccount/account_redeem" name="redeem" template="giftcardaccount/account/redeem_link.phtml" after="balance" />
        </reference>
    </enterprise_customerbalance_info_index>
</layout>