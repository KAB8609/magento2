<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2009 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>
<?php
/**
 * @see Enterprise_Reward_Block_Tooltip
 */
?>
<?php
    $_action = Enterprise_Reward_Model_Reward::REWARD_ACTION_INVITATION_CUSTOMER;
?>
<?php if ($this->canShow($_action)): ?>
<?php
    $_currentBalance = $this->getCurrentBalance();
    $_currencyAmount = $this->getCurrencyAmount($_action);
    $_points = $this->getRewardPoints($_action);
    $_limit = $this->getActionRewardLimit($_action);
?>
<div class="reward-message<?php if ($_limit): ?> reward-message-big<?php endif; ?> reward-invitation">
    <div class="reward">
        <?php if ($_currencyAmount): ?>
            <?php echo Mage::helper('enterprise_reward')->__("Invite now and get <strong>%s</strong> Reward Points (%s) if your Invitee registers.", $_points, $this->getFormattedAmount($_currencyAmount)) ?>
        <?php else: ?>
            <?php echo Mage::helper('enterprise_reward')->__("Invite now and get <strong>%s</strong> Reward Points if your Invitee registers.", $_points) ?>
        <?php endif; ?>

        <?php if ($_limit): ?>
            <p class="limit"><?php echo Mage::helper('enterprise_reward')->__("Up to <strong>%s</strong> Customer Conversions rewarded.", $_limit) ?></p>
        <?php endif; ?>
    </div>
    <div class="balance">
        <?php if ($_currentBalance): ?>
            <?php echo Mage::helper('enterprise_reward')->__("Your current balance is <strong>%s</strong> points.", $_currentBalance) ?>
        <?php endif; ?>
        <a href="<?php echo $this->getLandingPageUrl() ?>"><?php echo Mage::helper('enterprise_reward')->__("Learn more") ?></a>
    </div>
</div>
<?php endif; ?>

<?php
    $_action = Enterprise_Reward_Model_Reward::REWARD_ACTION_INVITATION_ORDER;
?>
<?php if ($this->canShow($_action)): ?>
<?php
    $_currencyAmount = $this->getCurrencyAmount($_action);
    $_points = $this->getRewardPoints($_action);
    $_limit = $this->getActionRewardLimit($_action);
?>
<div class="reward-message reward-invitation">
    <div class="reward">
        <?php if ($_currencyAmount): ?>
            <?php echo Mage::helper('enterprise_reward')->__("Get <strong>%s</strong> Reward Points (%s) for Purchases by your Invitees.", $_points, $this->getFormattedAmount($_currencyAmount)) ?>
        <?php else: ?>
            <?php echo Mage::helper('enterprise_reward')->__("Get <strong>%s</strong> Reward Points for Purchases by your Invitees.", $_points) ?>
        <?php endif; ?>
    </div>
    <div class="balance">
        <a href="<?php echo $this->getLandingPageUrl() ?>"><?php echo Mage::helper('enterprise_reward')->__("Learn more") ?></a>
    </div>
</div>
<?php endif; ?>
