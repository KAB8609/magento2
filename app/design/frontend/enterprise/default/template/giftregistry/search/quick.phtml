<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2009 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>

<?php if ($this->getEnabled() && $this->getTypesCollection()->getSize()) : ?>
<div class="block">
    <div class="block-title">
        <strong><span><?php echo Mage::helper('enterprise_giftregistry')->__('Gift Registry Search') ?></span></strong>
    </div>
    <form id="gr-quick-search-form" action="<?php echo $this->getActionUrl() ?>" method="post">
        <div class="block-content">
            <?php echo $this->getBlockHtml('formkey')?>
            <div><?php echo Mage::helper('enterprise_giftregistry')->__('First Name') ?> <em>*</em></div>
            <div><input type="text" class="input-text required-entry validate-name-length" id="params_firstname" name="params[firstname]" /></div>

            <div><?php echo Mage::helper('enterprise_giftregistry')->__('Last Name') ?> <em>*</em></div>
            <div><input type="text" class="input-text required-entry validate-name-length" id="params_lastname" name="params[lastname]" /></div>

            <div><?php echo Mage::helper('enterprise_giftregistry')->__('Type') ?></div>
            <div><?php echo $this->getTypeSelectHtml() ?></div>

            <div class="actions">
                <input type="hidden" name="params[search]" value="type">
                <button type="submit" title="<?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?>" class="button"><span><span><?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?></span></span></button>
            </div>
        </div>
    </form>

    <form id="gr-quick-search-email-form" action="<?php echo $this->getActionUrl() ?>" method="post">
        <div class="block-content">
            <?php echo $this->getBlockHtml('formkey')?>
            <div><?php echo Mage::helper('enterprise_giftregistry')->__('Registrant Email') ?></div>
            <div><input type="text" class="input-text required-entry validate-email" id="params_email" name="params[email]" /></div>
            <div class="actions">
                <input type="hidden" name="params[search]" value="email">
                <button type="submit" title="<?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?>" class="button"><span><span><?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?></span></span></button>
            </div>
        </div>
    </form>

    <form id="gr-quick-search-id-form" action="<?php echo $this->getActionUrl() ?>" method="post">
        <div class="block-content">
            <?php echo $this->getBlockHtml('formkey')?>
            <div><?php echo Mage::helper('enterprise_giftregistry')->__('Gift Registry ID') ?></div>
            <div><input type="text" class="input-text required-entry" id="params_id" name="params[id]" /></div>
            <div class="actions">
                <input type="hidden" name="params[search]" value="id">
                <button type="submit" title="<?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?>" class="button"><span><span><?php echo Mage::helper('enterprise_giftregistry')->__('Go') ?></span></span></button>
            </div>
        </div>
    </form>
</div>
<script type="text/javascript">
//<![CDATA[
    var grQuickSearchForm = new VarienForm('gr-quick-search-form');
    var grQuickSearchEmailForm = new VarienForm('gr-quick-search-email-form');
    var grQuickSearchIdForm = new VarienForm('gr-quick-search-id-form');

    Validation.addAllThese([
        ['validate-name-length', '<?php echo $this->__('Please enter at least 2 letters.') ?>', function(v, elm) {
            return (v.length >= 2);
        }]
    ]);
//]]>
</script>
<?php endif; ?>
