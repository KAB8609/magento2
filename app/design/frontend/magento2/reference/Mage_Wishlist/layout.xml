<?xml version="1.0"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     magento2_reference
 * @copyright   {copyright}
 * @license     {license_link}
 */

-->
<layout version="0.1.0">

<!--
Default layout, loads most of the pages
-->

    <default>

        <reference name="top.links">
            <block type="Mage_Wishlist_Block_Links" name="wishlist_link"/>
            <action method="addLinkBlock"><blockName>wishlist_link</blockName></action>
        </reference>

        <!-- Mage_Wishlist -->
        <reference name="right">
            <block type="Mage_Wishlist_Block_Customer_Sidebar" name="wishlist_sidebar" as="wishlist" after="cart_sidebar" template="sidebar.phtml"/>
        </reference>
    </default>

<!--
Customer account pages, rendered for all tabs in dashboard
-->

    <customer_account>
        <!-- Mage_Wishlist -->
        <reference name="customer_account_navigation">
            <action method="addLink" translate="label" module="Mage_Wishlist" ifconfig="wishlist/general/active"><name>wishlist</name><path>wishlist/</path><label>My Wish List</label></action>
        </reference>
    </customer_account>

<!--
Customer account home dashboard layout
-->

    <customer_account_index>
        <reference name="right">
            <action method="unsetChild"><name>wishlist</name></action>
        </reference>
    </customer_account_index>

<!--
Wishlist pages
-->

    <wishlist_index_index translate="label" type="page" parent="customer_account_index">
        <label>Customer My Account My Wish List</label>
        <!-- Mage_Wishlist -->
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Mage_Wishlist_Block_Customer_Wishlist" name="customer.wishlist" template="view.phtml">
                <action method="setTitle" translate="title">
                    <title>My Wish List</title>
                </action>
                <block type="Mage_Wishlist_Block_Customer_Wishlist_Items" name="customer.wishlist.items" as="items" template="item/list.phtml">
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Column_Image" name="customer.wishlist.item.image" template="item/column/image.phtml">
                        <action method="setColClass"><class>photo</class></action>
                    </block>
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Column_Comment" name="customer.wishlist.item.info" template="item/column/info.phtml">
                        <action method="setColClass"><class>item</class></action>
                        <action method="setTitle" translate="title">
                            <title>Product Details and Comment</title>
                        </action>
                    </block>
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Column_Cart" name="customer.wishlist.item.cart" template="item/column/cart.phtml">
                        <action method="setColClass"><class>actions</class></action>
                        <action method="setTitle" translate="title">
                            <title>Add to Cart</title>
                        </action>
                        <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Options" name="customer.wishlist.item.options"/>
                    </block>
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Item_Column_Remove" name="customer.wishlist.item.remove" template="item/column/remove.phtml">
                        <action method="setColClass"><class>remove</class></action>
                    </block>
                </block>
                <container name="customer.wishlist.buttons" as="control_buttons" label="Wishlist Control Buttons">
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Button" name="customer.wishlist.button.share" template="button/share.phtml"/>
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Button" name="customer.wishlist.button.toCart" template="button/tocart.phtml"/>
                    <block type="Mage_Wishlist_Block_Customer_Wishlist_Button" name="customer.wishlist.button.update" template="button/update.phtml"/>
                </container>
            </block>
        </reference>
        <reference name="right">
            <action method="unsetChild"><name>wishlist_customer_sidebar</name></action>
        </reference>
    </wishlist_index_index>

    <wishlist_index_share translate="label" type="page" parent="wishlist_index_index">
        <label>Customer My Account Wish List Sharing Form</label>
        <!-- Mage_Wishlist -->
        <update handle="customer_account"/>
        <reference name="my.account.wrapper">
            <block type="Mage_Wishlist_Block_Customer_Sharing" name="wishlist.sharing" template="sharing.phtml"/>
        </reference>
        <reference name="right">
            <action method="unsetChild"><name>wishlist_customer_sidebar</name></action>
        </reference>
    </wishlist_index_share>

    <wishlist_index_configure translate="label" type="page" parent="catalog_product_view">
        <label>Configure Wishlist Item</label>
        <update handle="catalog_product_view"/>

        <reference name="product.info.main">
            <block type="Mage_Wishlist_Block_Item_Configure" name="product.info.addto" as="addto" template="Mage_Wishlist::item/configure/addto.phtml"/>
        </reference>

        <reference name="product.info.options.wrapper.bottom">
            <action method="unsetChild"><name>product.info.addtocart.additional</name></action>
            <action method="append"><element>product.info.addtocart.additional</element></action>
        </reference>
    </wishlist_index_configure>

    <!--    Additional block dependant on product type    -->
    <wishlist_index_configure_type_configurable translate="label" module="Mage_Catalog" type="page" parent="catalog_product_view">
        <label>Configure Wishlist Item (Configurable)</label>
        <reference name="root">
            <action method="addBodyClass"><value>type-configurable</value></action>
        </reference>
        <reference name="product.info.type">
            <block type="Mage_Catalog_Block_Product_View_Type_Configurable" name="product.info.configurable" as="product_type_data" template="product/view/type/default.phtml"/>
            <container name="product.info.configurable.extra" after="product.info.configurable" as="product_type_data_extra" label="Product Extra Info"/>
        </reference>
        <reference name="product.info.options.wrapper">
            <block type="Mage_Catalog_Block_Product_View_Type_Configurable" name="product.info.options.configurable" as="options_configurable" before="-" template="product/view/type/options/configurable.phtml"/>
        </reference>
    </wishlist_index_configure_type_configurable>
    <wishlist_index_configure_type_grouped translate="label" module="Mage_Catalog" type="page" parent="catalog_product_view">
        <label>Configure Wishlist Item (Grouped)</label>
        <reference name="product.info.form.content">
            <block type="Mage_Catalog_Block_Product_View_Type_Grouped" name="product.info.grouped" before="product.info.addtocart" template="product/view/type/grouped.phtml"/>
            <container name="product.info.grouped.extra" after="product.info.grouped" before="product.info.grouped" as="product_type_data_extra" label="Product Extra Info"/>
        </reference>
    </wishlist_index_configure_type_grouped>
    <wishlist_index_configure_type_bundle translate="label" module="Mage_Bundle" type="page" parent="catalog_product_view">
        <label>Configure Wishlist Item (Bundle)</label>
        <reference name="head">
            <action method="addJs"><file>Mage_Bundle::bundle.js</file></action>
            <action method="addJs"><file>Mage_Bundle::js/product-summary.js</file></action>
        </reference>
        <reference name="root">
            <action method="addBodyClass"><value>type-bundle</value></action>
        </reference>
        <reference name="product.info">
            <block type="Mage_Bundle_Block_Catalog_Product_View" name="bundle.summary" as="form_top" template="catalog/product/view/summary.phtml" translate="label">
                <label>Bundle Product View Summary</label>
                <block type="Mage_Bundle_Block_Catalog_Product_Price" name="bundle.prices" as="bundle_prices" template="catalog/product/view/price.phtml">
                    <action method="setMAPTemplate"><tmpl>catalog/product/price_msrp_item.phtml</tmpl></action>
                </block>
                <block type="Mage_Catalog_Block_Product_View" name="product.info.addtocart.bundle" as="addtocart" template="product/view/addtocart.phtml"/>
                <block type="Mage_Catalog_Block_Product_View" name="product.info.addto.bundle" as="addto" template="product/view/addto.phtml"/>
            </block>
        </reference>
        <reference name="product.info.options.wrapper">
            <block type="Mage_Catalog_Block_Product_View" name="bundle.product.view.options.notice" template="Mage_Bundle::catalog/product/view/options/notice.phtml" />
            <block type="Mage_Bundle_Block_Catalog_Product_View_Type_Bundle" name="product.info.bundle.options" as="type_bundle_options" template="catalog/product/view/type/bundle/options.phtml" before="-">
                <action method="addRenderer"><type>select</type><block>Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Select</block></action>
                <action method="addRenderer"><type>multi</type><block>Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Multi</block></action>
                <action method="addRenderer"><type>radio</type><block>Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio</block></action>
                <action method="addRenderer"><type>checkbox</type><block>Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Checkbox</block></action>
            </block>
        </reference>
        <reference name="product.info.options.wrapper.bottom">
            <remove name="product.tierprices" />
            <block type="Mage_Bundle_Block_Catalog_Product_View" name="bundle.tierprices" as="tierprices" before="-" template="Mage_Bundle::catalog/product/view/tierprices.phtml"/>
            <block type="Mage_CatalogInventory_Block_Qtyincrements" name="product.info.qtyincrements" before="-" template="qtyincrements.phtml"/>
            <block type="Mage_Bundle_Block_Catalog_Product_View" name="bundle.back.button" as="backButton" after="-" template="catalog/product/view/backbutton.phtml"/>
            <action method="unsetChild"><block>product.info.addtocart</block></action>
            <action method="setHideRequiredNotice"><flag>1</flag></action>
            <action method="unsetChild"><block>product.info.addto</block></action>
        </reference>
        <reference name="content">
            <container name="bundle.options.container" label="invisible" htmlTag="div" htmlClass="bundle options container" after="product.info.media" />
            <move element="product.info" destination="bundle.options.container" before="-"/>
        </reference>

        <reference name="product.info.type">
            <block type="Mage_Bundle_Block_Catalog_Product_View_Type_Bundle" name="product.info.bundle" as="product_type_data" template="catalog/product/view/type/bundle.phtml">
                <action method="addPriceBlockType"><type>bundle</type><block>Mage_Bundle_Block_Catalog_Product_Price</block><template>catalog/product/price.phtml</template></action>
            </block>
            <container name="product.info.bundle.extra" after="product.info.bundle" as="product_type_data_extra" label="Product Extra Info"/>
            <block type="Mage_Bundle_Block_Catalog_Product_View" name="customize.button" as="customize_button" template="catalog/product/view/customize.phtml"/>
        </reference>
        <reference name="product.clone_prices">
            <action method="addPriceBlockType"><type>bundle</type><block>Mage_Bundle_Block_Catalog_Product_Price</block><template>catalog/product/view/price.phtml</template></action>
        </reference>
    </wishlist_index_configure_type_bundle>

    <wishlist_shared_index translate="label" type="page" parent="wishlist_index_share">
        <label>Customer Shared Wishlist View</label>
        <!-- Mage_Wishlist -->
        <reference name="content">
            <block type="Mage_Wishlist_Block_Share_Wishlist" name="customer.wishlist" template="shared.phtml"/>
        </reference>
    </wishlist_shared_index>
</layout>
