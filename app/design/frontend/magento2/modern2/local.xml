<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * {license_notice}
 *
 * @category    design
 * @package     magento2_modern2
 * @copyright   {copyright}
 * @license     {license_link}
 */
-->

<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]-->
<layout version="0.1.0">
    <default>
        <!-- Setting theme name to display near the logo -->
        <reference name="logo">
            <action method="setThemeName"><name>Modern 2</name></action>
        </reference>
        <reference name="head">
            <action method="addCss"><file>mui/reset.css</file></action>
            <action method="addCss"><file>css/styles.css</file></action>
            <action method="addJs"><file>lib/modernizr.js</file></action>
            <action method="addJs"><file>jquery/jquery.hoverIntent.js</file></action>
            <action method="addJs"><file>js/jquery.dropdowns.js</file></action>
            <action method="addJs"><file>js/theme.js</file></action>
            <action method="addJs"><file>js/tabs.js</file></action>
            <action method="addJs"><file>js/selectivizr-min.js</file><params/><if>lt IE 9</if></action>
        </reference>
        <reference name="page.bottom">
             <container name="place.communication" label="Newsletter Placeholder" htmlTag="div" htmlClass="place communication" />
        </reference>
        <reference name="catalog.topnav">
            <action method="setColumnsLimit"><limit>1</limit></action>
        </reference>
        <move element="place.communication" destination="page.bottom" after="-" />
        <move element="external.pagecache.cookie" destination="content.bottom" after="-" />

        <block type="Mage_Page_Block_Html_Header" name="customer">
            <action method="setShowPart"><value>customer</value></action>
        </block>

        <remove name="tags_popular" />

        <remove name="top.links" />
        <move element="minicart" destination="panel.menu" after="-" />

        <reference name="header.panel">
            <block type="Mage_Page_Block_Template_Links" name="panel.menu" before="-">
                <!-- My account -->
                <block type="Mage_Customer_Block_Account_Link">
                    <action method="addAccountLink"><target>panel.menu</target><position>10</position></action>
                </block>

                <!-- My whishlist -->
                <block type="Mage_Wishlist_Block_Links" name="wishlist.link" />
                <action method="addLinkBlock"><blockName>wishlist.link</blockName><position>0</position></action>

                <!-- My cart -->
                <action method="addLinkBlock"><blockName>minicart</blockName><position>0</position></action>
                <reference name="minicart">
                    <action method="setInList"><value>1</value></action>
                </reference>

                <!-- Checkout button -->
                <block type="Mage_Checkout_Block_Links">
                    <action method="addCheckoutLink"></action>
                </block>
            </block>

            <!-- Login or register / welcome user -->
            <block type="Mage_Page_Block_Template_Links" name="account.links" after="panel.menu">.
                <action method="setCssClass"><class>customer</class></action>
                <action method="addLinkBlock"><blockName>customer</blockName></action>
                <block type="Mage_Customer_Block_Account_Link">
                    <action method="addAuthLink"><target>account.links</target><position>0</position></action>
                    <action method="addRegisterLink" translate="text_before"><target>account.links</target><position>100</position><text_before> or </text_before></action>
                </block>
            </block>
        </reference>

        <move element="top.search" destination="header" before="-" />
        <move element="logo" destination="header" after="top.search" />
        <move element="catalog.topnav" destination="header-container" />
        <move element="catalog.compare.sidebar" destination="left" after="-" />
    </default>

    <catalog_category_view>
        <reference name="product_list">
            <action method="setPositioned">
                <!-- If position of actions is depend on image size changable in VDE:
                    <value>positions:list-secondary,grid-secondary,list-actions,grid-actions,list-primary,grid-primary</value>
                -->
                <value>positions:list-secondary</value>
            </action>
        </reference>
        <move element="page.main.title" destination="main" before="-" />
    </catalog_category_view>

    <catalogsearch_result_index>
        <reference name="search_result_list">
            <action method="setPositioned">
                <!-- If position of actions is depend on image size changable in VDE:
                    <value>positions:list-secondary,grid-secondary,list-actions,grid-actions,list-primary,grid-primary</value>
                -->
                <value>positions:list-secondary</value>
            </action>
        </reference>
    </catalogsearch_result_index>

    <checkout_cart_index>
        <remove name="checkout.cart.methods.top" />
    </checkout_cart_index>

    <catalog_product_view>
        <move element="product.info.sku" destination="product.info.main" before="page.main.title" />
        <move element="page.main.title" destination="product.info.main" before="-" />
        <move element="product.price" destination="product.info.main" after="product.info.type" />

        <remove name="product.info.overview" />

        <reference name="product.info.details" after="-">
            <block type="Mage_Catalog_Block_Product_View_Additional" name="product.info.reviews.tab" as="product_reviews">
                <action method="addToParentGroup"><group>detailed_info</group></action>
                <action method="setTitle" translate="value"><value>Reviews</value></action>
                <block type="Mage_Review_Block_Form" name="product.review.form" as="review_form">
                    <container name="product.review.form.fields.before" as="form_fields_before" label="Review Form Fields Before" htmlTag="div" htmlClass="rewards"/>
                </block>
                <block type="Mage_Review_Block_Product_View_List" name="product.info.product_additional_data" as="product_additional_data" template="product/view/list.phtml" />
            </block>
        </reference>
        <reference name="content.bottom">
            <block type="Mage_Reports_Block_Product_Widget_Viewed" page_size="6" template="Mage_Catalog::product/list/items.phtml" before="product_tag_list">
                <action method="setType"><type>widget-viewed</type></action>
                <action method="setViewMode"><mode>grid</mode></action>
                <action method="setImageType"><image>recently_viewed_products_grid_content_widget</image></action>
            </block>
        </reference>
        <move element="product.info.mailto" destination="content" after="product.info.details" />
    </catalog_product_view>

    <catalog_product_view_type_bundle>
        <move element="customize.button" destination="product.info.main" after="product.price" />
    </catalog_product_view_type_bundle>

    <review_product_list>
        <reference name="root">
            <action method="setTemplate"><template>blank.phtml</template></action>
            <block type="Mage_Review_Block_Product_View" as="content" name="product.redirect" template="redirect.phtml" />
        </reference>
    </review_product_list>

    <!-- Temporary add homepage html -->
    <cms_index_index translate="label" type="page" parent="cms_page_view">
        <label>CMS Home Page</label>
        <remove name="content" />
        <reference name="content.top">
            <block type="Mage_Core_Block_Template" name="default_home_page" template="Mage_Cms::default/home.phtml"/>
        </reference>
    </cms_index_index>

    <print>
        <reference name="head">

        </reference>
    </print>

    <catalog_product_compare_index translate="label" type="page" parent="default">
        <label>Catalog Product Compare List</label>
        <update handle="page_one_column" />
        <reference name="page.main.title">
            <action method="setPageTitle" translate="title"><title>Compare Products</title></action>
        </reference>
        <!-- Mage_Catalog -->
    </catalog_product_compare_index>

    <customer_account translate="label" type="page" parent="default">
        <move element="page.main.title" destination="my.account.wrapper" before="-" />
    </customer_account>

</layout>
