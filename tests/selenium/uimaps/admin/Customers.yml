#
# Magento
#
# NOTICE OF LICENSE
#
# This source file is subject to the Academic Free License (AFL 3.0)
# that is bundled with this package in the file LICENSE_AFL.txt.
# It is also available through the world-wide-web at this URL:
# http://opensource.org/licenses/afl-3.0.php
# If you did not receive a copy of the license and are unable to
# obtain it through the world-wide-web, please send an email
# to license@magentocommerce.com so we can send you a copy immediately.
#
# DISCLAIMER
#
# Do not edit or add to this file if you wish to upgrade Magento to newer
# versions in the future. If you wish to customize Magento for your
# needs please refer to http://www.magentocommerce.com for more information.
#
# @category    tests
# @package     selenium
# @subpackage  uimaps
# @author      Magento Core Team <core@magentocommerce.com>
# @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
# @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
#
---
#Manage Customers and related pages
# 'Manage Customers' page
manage_customers:
  mca: customer/
  title: Manage Customers / Customers / Magento Admin
  uimap:
    form: &searchCustomerGrid
      fieldsets:
        -
          customers_grid:
            fields:
              id_from: input[@id='filter_entity_id_from']
              id_to: input[@id='filter_entity_id_to']
              name: input[@id='filter_name']
              email: input[@id='filter_email']
            buttons:
              reset_filter: button[span='Reset Filter']
              search: button[span='Search']
    buttons:
      add_new_customer: button[span='Add New Customer']
    messages:
      success_save_customer: div[@id='messages']//li[span='The customer has been saved.']
      success_delete_customer: div[@id='messages']//li[span='The customer has been deleted.']

# 'New Customer' Page
create_customer:
  mca: customer/new/
  title: New Customer / Manage Customers / Customers / Magento Admin
  uimap:
    form: &newCustomerForm
      tabs:
        -
          account_information:
            xpath: a[@id='customer_info_tabs_account']
            fieldsets:
              -
                account_info:
                  xpath: div[@id='_accountbase_fieldset']
                  checkboxes:
                    send_welcome_email: input[@id='_accountsendemail']
                  dropdowns:
                    associate_to_website: select[@id='_accountwebsite_id']
                    group: select[@id='_accountgroup_id']
                    gender: select[@id='_accountgender']
                    send_from: select[@id='_accountsendemail_store_id']
                  fields:
                    prefix: input[@id='_accountprefix']
                    first_name: input[@id='_accountfirstname']
                    middle_name_initial: input[@id='_accountmiddlename']
                    last_name: input[@id='_accountlastname']
                    suffix: input[@id='_accountsuffix']
                    email: input[@id='_accountemail']
                    date_of_birth: input[@id='_accountdob']
                    tax_vat_number: input[@id='_accounttaxvat']
                  required: [associate_to_website, group, first_name, last_name, email]
              -
                password:
                  xpath: div[@id='_accountpassword_fieldset']
                  checkbox:
                    auto_generated_password: input[@id='account-send-pass']
                  fields:
                    password: input[@id='_accountpassword']
                  required: [password]
        -
          addresses:
            xpath: a[@id='customer_info_tabs_addresses']
            fieldsets:
              -
                fieldset_customer_addresses:
                  xpath: div[@id='_item%address_number%address_fieldset']
                  buttons:
                    add_new_address: button[span='Add New Address']
                    delete_address: img[@id='delete_button%address_number%1']
                    edit_address: img[@id='select_button_%address_number%']
                  radiobuttons:
                    default_billing_address: input[@id='address_item_billing_item%address_number%']
                    default_shipping_address: input[@id='address_item_shipping_item%address_number%']
              -
                edit_address:
                  xpath: div[@id='_item%address_number%address_fieldset']
                  dropdowns:
                    country: select[@id='_item%address_number%country_id']
                    state_province: select[@id='_item%address_number%region_id']
                  fields:
                    prefix: input[@id='_item%address_number%prefix']
                    first_name: input[@id='_item%address_number%firstname']
                    middle_name_initial: input[@id='_item%address_number%middlename']
                    last_name: input[@id='_item%address_number%lastname']
                    suffix: input[@id='_item%address_number%suffix']
                    company: input[@id='_item%address_number%company']
                    street_address_line_1: input[@id='_item%address_number%street0']
                    street_address_line_2: input[@id='_item%address_number%street1']
                    city: input[@id='_item%address_number%city']
                    state_province: input[@id='_item%address_number%region']
                    zip_postal_code: input[@id='_item%address_number%postcode']
                    telephone: input[@id='_item%address_number%telephone']
                    fax: input[@id='_item%address_number%fax']
                  required: [first_name, last_name, street_address_line_1, city, country, zip_postal_code, telephone]
    buttons:
      back: button[span='Back']
      reset: button[span='Reset']
      save_customer: button[span='Save Customer']
      save_and_continue_edit: button[span='Save and Continue Edit']
    messages:
      success_save_customer: div[@id='messages']//li[span='The customer has been saved.']
      error_email_exist: div[@id='messages']//li[span='Customer with the same email already exists.']
      error_invalid_email: div[@id='messages']//li[span='"Email" is not a valid email address.']
      error_password_too_short: div[text()='Please enter 6 or more characters. Leading or trailing spaces will be ignored.' and normalize-space(@class)='validation-advice' and not(contains(@style,'display":" none;'))]
      error_empty_value: "*[normalize-space(text())='%fieldName%']/parent::*/following-sibling::*/div[normalize-space(@class)='validation-advice' and not(contains(@style,'display: none;'))]"

# 'Edit Customer' Page
edit_customer:
  mca: edit/id/%customers_id%
  title: %customers_id% / Manage Customers / Customers / Magento Admin
  uimap:
    form: &editCustomerForm
      tabs:
        -
          customer_view:
            xpath: a[@id='customer_info_tabs_customer_edit_tab_view']
        -
          account_information:
            xpath: a[@id='customer_info_tabs_account']
            fieldsets:
              -
                account_info:
                  xpath: div[@id='_accountbase_fieldset']
                  dropdowns:
                    group: select[@id='_accountgroup_id']
                    gender: select[@id='_accountgender']
                    send_from: select[@id='_accountsendemail_store_id']
                  fields:
                    prefix: input[@id='_accountprefix']
                    first_name: input[@id='_accountfirstname']
                    middle_name_initial: input[@id='_accountmiddlename']
                    last_name: input[@id='_accountlastname']
                    suffix: input[@id='_accountsuffix']
                    email: input[@id='_accountemail']
                    date_of_birth: input[@id='_accountdob']
                    tax_vat_number: input[@id='_accounttaxvat']
                  required: [group, first_name, last_name, email]
              -
                password:
                  xpath: div[@id='_accountpassword_fieldset']
                  checkboxes:
                    auto_generated_password: input[@id='account-send-pass']
                  fields:
                    new_password: input[@id='_accountnew_password']
                  required: [password]
        -
          addresses:
            xpath: a[@id='customer_info_tabs_addresses']
            fieldsets:
              -
                customer_addresses:
                 xpath: div[@id='_item%address_number%address_fieldset']
                 buttons:
                  add_new_address: button[span='Add New Address']
                  delete_address: img[@id='delete_button%address_number%1']
                  edit_address: img[@id='select_button_%address_number%']
                radiobuttons:
                  default_billing_address: input[@id='address_item_billing_item%address_number%']
                  default_shipping_address: input[@id='address_item_shipping_item%address_number%']
              -
                edit_address:
                  xpath:  div[@id='_item%address_number%address_fieldset']
                  dropdowns:
                    country: select[@id='_item%address_number%country_id']
                    state_province: select[@id='_item%address_number%region_id']
                  fields:
                    prefix: input[@id='_item%address_number%prefix']
                    first_name: input[@id='_item%address_number%firstname']
                    middle_name_initial: input[@id='_item%address_number%middlename']
                    last_name: input[@id='_item%address_number%lastname']
                    suffix: input[@id='_item%address_number%suffix']
                    company: input[@id='_item%address_number%company']
                    street_address_line_1: input[@id='_item%address_number%street0']
                    street_address_line_2: input[@id='_item%address_number%street1']
                    city: input[@id='_item%address_number%city']
                    state_province: input[@id='_item%address_number%region']
                    zip_postal_code: input[@id='_item%address_number%postcode']
                    telephone: input[@id='_item%address_number%telephone']
                    fax: input[@id='_item%address_number%fax']
                  required: [first_name, last_name, street_address_line_1, city, country, zip_postal_code, telephone]
        -
          orders:
            xpath: a[@id='customer_info_tabs_orders']
            # need to edit
        -
          billing_agremnts:
            xpath: a[@id='customer_info_tabs_customer_edit_tab_agreements']
            # need to edit
        -
          recuring_profiles:
            xpath: a[@id='customer_info_tabs_customer_edit_tab_recurring_profile']
            # need to edit
        -
          shopping_cart:
            xpath: a[@id='customer_info_tabs_cart']
            # need to edit
        -
          wishlist:
            xpath: a[@id='customer_info_tabs_wishlist']
            # need to edit
        -
          newsletters:
            xpath: a[@id='customer_info_tabs_newsletter']
            fieldsets:
              -
                newsletter_info:
                  xpath: div[@id='_newsletterbase_fieldset']
                  checkboxes:
                    subscribe_to_newsletters: input[@id='_newslettersubscription']
                  # need to edit
        -
          product_review:
            xpath: a[@id='customer_info_tabs_reviews']
            # need to edit
        -
          product_tags:
            xpath: a[@id='customer_info_tabs_tags']
            # need to edit
        -
          store_credit:
            xpath: a[@id='customer_info_tabs_customerbalance']
            fieldsets:
              -
                store_credit_balance:
                  xpath: div[@id='_customerbalancestorecreidt_fieldset']
              -
                update_balance:
                  xpath: div[@id='_customerbalancestorecreidt_fieldset']
                  checkboxes:
                   notify_by_email: input[@id='_customerbalancenotify_by_email']
                  dropdowns:
                    website: select[@id='_customerbalancewebsite_id']
                    email_form_website: select[@id='_customerbalancestore_id']
                  fields:
                    update_balance: input[@id='_customerbalanceamount_delta']
                    comment: input[@id='_customerbalancecomment']
                 # need to edit
        -
          gift_registry:
            xpath: a[@id='customer_info_tabs_giftregistry']
            # need to edit
        -
          reward_points:
            xpath: a[@id='customer_info_tabs_customer_edit_tab_reward']
            fieldsets:
              -
                update_reward_points:
                  xpath: div[@id='reward_update_fieldset']
                  dropdowns:
                    store: select[@id='reward_store']
                  fields:
                    update_points: input[@id='reward_points_delta']
                    comment: input[@id='reward_comment']
              -
                reward_points_notifictions:
                  xpath: div[@id='reward_notification_fieldset']
                  checkboxes:
                    subscribe_for_updates: input[@id='reward_update_notification']
                    subscribe_for_notifications: input[@id='reward_warning_notification']
    buttons:
      back: button[span='Back']
      reset: button[span='Reset']
      create_order: button[span='Create Order']
      delete_customer: button[span='Delete Customer']
      manage_shopping_cart: button[span='Manage Shopping Cart']
      save_customer: button[span='Save Customer']
      save_and_continue_edit: button[span='Save and Continue Edit']
    messages:
      success_save_customer: div[@id='messages']//li[span='The customer has been saved.']
      error_email_exist: div[@id='messages']//li[span='Customer with the same email already exists.']
      error_invalid_email: div[@id='messages']//li[span='"Email" is not a valid email address.']
      error_password_too_short: div[text()='Please enter 6 or more characters. Leading or trailing spaces will be ignored.' and normalize-space(@class)='validation-advice' and not(contains(@style,'display":" none;'))]
      error_empty_value: "*[normalize-space(text())='%fieldName%']/parent::*/following-sibling::*/div[normalize-space(@class)='validation-advice' and not(contains(@style,'display: none;'))]"