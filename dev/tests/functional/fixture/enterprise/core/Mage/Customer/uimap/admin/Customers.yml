# Magento
#
# {license_notice}
#
# @category    Magento
# @package     Mage_Customer
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# 'Edit Customer' Page
edit_customer:
    uimap:
        form:
            tabs:
                -
                    customer_view:
                        fieldsets:
                            -
                                sales_statistics:
                                    pageelements:
                                        sales_statistics_head: //div/div[div/h4[@class='icon-head head-customer-sales-statistics']]/div[@class='grid']/table/thead
                                        reward_points_head: //div[@id='customer_info_tabs_customer_edit_tab_view_content']//div[@id='rewardPointsBalanceGrid']/div[@class='grid']//thead
                                        store_credit_head: //div[@id='balanceGrid']/div[@class='grid']//thead
                -
                    store_credit:
                        xpath: //a[@id='customer_info_tabs_customerbalance']
                        fieldsets:
                            -
                                update_store_balance:
                                    xpath: //div[@id='_customerbalancestorecreidt_fieldset']
                                    dropdowns:
                                        website: //select[@id='_customerbalancewebsite_id']
                                        store: //select[@id='_customerbalancestore_id']
                                    fields:
                                        update_balance: //input[@id='_customerbalanceamount_delta']
                                        comment: //input[@id='_customerbalancecomment']
                                    checkboxes:
                                        notify_by_email: //input[@id='_customerbalancenotify_by_email']
                            -
                                current_store_balance:
                                    xpath: //div[@id='customer_info_tabs_customerbalance_content']//div[@id='balanceGrid']
                                    fields:
                                        current_balance: //table[@id='balanceGrid_table']/tbody/tr[td[contains(text(),'%webSiteName%')]]/td[1]
                                    pageelements:
                                        store_credit_balance_head: //div[@class='grid']//thead
                            -
                                balance_history:
                                    xpath: //div[@id='historyGrid']
                                    dropdowns:
                                       filter_website: //select[@id='historyGrid_filter_website_id']
                -
                    gift_regystry:
                        xpath: //a[@id='customer_info_tabs_giftregistry']
                        fieldsets:
                            -
                                gift_registry_grid:
                                    xpath: //div[@id='customerGrid']
                                    dropdowns:
                                        filter_website: //select[@id='customerGrid_filter_website_id']
                -
                    reward_points:
                        xpath: //a[@id='customer_info_tabs_customer_edit_tab_reward']
                        fieldsets:
                            -
                                update_reward_balance:
                                    xpath: //div[@id='reward_update_fieldset']
                                    fields:
                                        update_balance: //input[@id='reward_points_delta']
                                        comment: //input[@id='reward_comment']
                                    dropdowns:
                                        store: //select[@id='reward_store']
                            -
                                current_reward_balance:
                                    xpath: //div[@id='customer_info_tabs_customer_edit_tab_reward_content']//div[@id='rewardPointsBalanceGrid']
                                    fields:
                                        current_balance: //table[@id='rewardPointsBalanceGrid_table']/tbody/tr[td[contains(text(),'%webSiteName%')]]/td[2]
                                        balance_is_present: //table[@id='rewardPointsBalanceGrid_table']/tbody/tr[td[contains(text(),'%webSiteName%')]]/td[1]
                                    pageelements:
                                        reward_points_balance_head: //div[@class='grid']//thead
                            -
                                reward_points_history:
                                    xpath: //dl[dt/a='Reward Points History']
                                    pageelements:
                                        reward_points_history_rows_number: //td[@class='pager']//span[contains(@id,'rewardPointsHistoryGrid-total-count')]
                                    dropdowns:
                                        filter_website: //select[@id='rewardPointsHistoryGrid_filter_website']
                                    links:
                                        reward_points_history_link: //a[contains(.,'Reward Points History')]
        buttons:
            manage_shopping_cart: //button[span='Manage Shopping Cart']

#Manage Invitations page
manage_invitations:
    mca: invitation/
    click_xpath: //ul[@id='nav']//a[contains(@href, 'invitation/')]
    title: Invitations / Customers / Magento Admin
    uimap:
        form: &searchInvitationsGrid
            fieldsets:
                -
                    invitations_grid:
                        xpath: //div[@id='invitationGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                            submit: //button[span='Submit']
                        dropdowns:
                            grid_massaction_select: //select[@id='invitationGrid_massaction-select']
                            massaction: //select[@name='massaction']
                            status: //select[@id='invitationGrid_filter_status']
                            valid_on_website: //select[@id='invitationGrid_filter_website_id']
                            invitee_group: //select[@id='invitationGrid_filter_group_id']
                        fields:
                            id: //input[@id='invitationGrid_filter_enterprise_invitation_id']
                            email: //input[@id='invitationGrid_filter_email']
                            sent_from: //input[@name='invitation_date[from]']
                            sent_to: //input[@name='invitation_date[to]']
                            registered_from: //input[@name='signup_date[from]']
                            registered_to: //input[@name='signup_date[to]']
                        pageelements:
                            invitations_grid_head: //table[@id='invitationGrid_table']/thead/tr[@class='headings']
        buttons:
            add_invitations: //button[span='Add Invitations']
        messages: &invitationsMessages
            failed_send_several_items:  //li[normalize-space(@class)='error-msg' and contains(text()='Failed to send %numberMessagesFailed% of %numberMessagesOf% invitation(s).')]
            failed_send: //li[normalize-space(@class)='error-msg' and contains(text()='Failed to send %numberMessagesFailed% invitation(s).')]
            success_send: //li[normalize-space(@class)='success-msg' and contains(.,'1 invitation(s) were sent.')]

# New invitations page

new_invitations:
    mca: invitation/new/
    title: Magento Admin
    uimap:
        form:
            fieldsets:
                -
                    invitations_properties:
                        xpath: //div[@id='base_fieldset']
                        dropdowns:
                            invitee_group: //select[@id='group_id']
                        fields:
                            email_on_new_line: //textarea[@id='email']
                            message: //textarea[@id='message']
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            save: //button[span='Save']

#Edit Customer Invitations page

edit_invitations:
    mca: invitation/view/id/%id%/
    title: Invitations / Customers / Magento Admin
    uimap:
        form: &editInvitationsForm
            tabs:
                -
                    general:
                        xpath: //a[@name='general']
                        fieldsets:
                            -
                                invitations_informations:
                                    xpath: //div[@class='fieldset']
                                    fields:
                                        email: //input[@name='email']
                                        message: //textarea[@name='message']
        buttons:
            back: //button[span='Back']
            discard_invitation: //button[span='Discard Invitation']
            save_invitation: //button[span='Save Invitation']
            send_invitation: //button[span='Send Invitation']

#Manage Gift Card Accounts page
manage_gift_card_account:
    mca: giftcardaccount/
    click_xpath: //ul[@id='nav']//a[contains(@href, 'giftcardaccount/')]
    title: Gift Card Accounts / Customers / Magento Admin
    uimap:
        form: &searchGiftCardAccountGrid
            fieldsets:
                -
                    customer_segment_grid:
                        xpath:  //div[@id='giftcardaccountGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                            submit: //button[span='Submit']
                            export: //button[span='Export']
                        fields:
                            filter_code: //input[@id='giftcardaccountGrid_giftcardaccount_filter_code']
                            filter_id_from: //input[@name='giftcardaccount_id[from]']
                            filter_id_to: //input[@name='giftcardaccount_id[to]']
                            filter_date_created_from: //input[@name='date_created[from]']
                            filter_date_created_to: //input[@name='date_created[to]']
                            filter_expiration_data_from: //input[@name='date_expires[from]']
                            filter_expiration_data_to: //input[@name='date_expires[to]']
                            filter_balance_from: //input[@name='balance[from]']
                            filter_balance_to: //input[@name='balance[to]']
                        dropdowns:
                            filter_website: //select[@id='giftcardaccountGrid_giftcardaccount_filter_website']
                            filter_active: //select[@id='giftcardaccountGrid_giftcardaccount_filter_status']
                            filter_status: //select[@id='giftcardaccountGrid_giftcardaccount_filter_state']
                            actions: //select[@id='giftcardaccountGrid_massaction-select']
                            export_to: //select[@id='giftcardaccountGrid_export']
        buttons:
            add_gift_card_account: //button[span='Add Gift Card Account']
        messages: &addGiftCardAccountMessages
            success_saved_gift_card_account: //li[normalize-space(@class)='success-msg' and contains(.,'The gift cart account has been saved.')]
            success_deleted_gift_card_account: //li[normalize-space(@class)='success-msg' and contains(.,'Gift Card Account has been deleted.')]

# Add New Gift Card Account page
new_gift_card_account:
    mca: giftcardaccount/new/
    title: New Account / Gift Card Accounts / Customers / Magento Admin
    uimap:
        form: &newGiftCardAccountForm
            tabs:
                -
                    informations:
                        xpath: //a[@id='giftcardaccount_info_tabs_info']
                        fieldsets:
                            -
                                gift_card_information:
                                    xpath: //div[@id='_infobase_fieldset']
                                    dropdowns:
                                        active: //select[@id='_infostatus']
                                        redeemable: //select[@id='_infois_redeemable']
                                    fields:
                                        balance: //input[@id='_infobalance" class=']
                                        expiration_data: //textarea[@id='_infodate_expires']
                                    multiselects:
                                        website: //select[@id='_infowebsite_id']
                -
                    send_gift_card:
                        xpath: //a[@id='giftcardaccount_info_tabs_send']
                        fieldsets:
                            -
                                send_gift_card:
                                    xpath: //div[@id='_sendbase_fieldset']
                                    fields:
                                        recipient_email: //input[@id='_sendrecipient_email=']
                                        recipient_name: //input[@id='_sendrecipient_name']
                                    multiselects:
                                        send_email_from: //select[@id='_sendstore_id']
        buttons:
             back: //button[span='Back']
             reset: //button[span='Reset']
             save_segment: //button[span='Save']
             save_and_send_email: //button[span='Save & Send Email']
        messages: *addGiftCardAccountMessages

#Manage Reward Exchange Rates page
manage_reward_rates:
    mca: reward_rate/
    click_xpath: //ul[@id='nav']//a[contains(@href, 'reward_rate/')]
    title: Reward Exchange Rates / Customers / Magento Admin
    uimap:
        form: &searchRewardPointGrid
            fieldsets:
                -
                      reward_point_grid:
                          xpath: //div[@id='rewardRatesGrid']
                          buttons:
                              reset_filter: //button[span='Reset Filter']
                              search: //button[span='Search']
                          fields:
                              reward_id: //input[@id='rewardRatesGrid_filter_rate_id']
                              page: //input[@name='page']
                          dropdowns:
                              website: //select[@id='rewardRatesGrid_filter_website_id']
                              customer_group: //select[@id='rewardRatesGrid_filter_customer_group_id']
                              view_on_page: //select[@name='limit']
                          pageelements:
                              reward_point_grid_head: //div[@id='rewardRatesGrid']//thead/tr[@class='headings']
        buttons:
            add_new_rate: //button[span='Add New Rate']
        messages: &customerSegmentMessages
            success_saved_rate: //li[normalize-space(@class)='success-msg' and contains(.,'The rate has been saved.')]
            success_delete_rate: //li[normalize-space(@class)='success-msg' and contains(.,'The rate has been deleted.')]
#New Reward Exchange Rate page
new_reward_rate:
    mca: reward_rate/new/
    title: New Rate / Reward Exchange Rates / Customers / Magento Admin
    uimap: &newRateUimap
        form:
            fieldsets:
                -
                    reward_rate_properties:
                        xpath: //div[@id='base_fieldset']
                        dropdowns:
                            website: //select[@id='website_id']
                            customer_groups: //select[@id='customer_group_id']
                            direction: //select[@id='direction']
                        fields:
                            rate_value: //input[@name='rate[value]']
                            rate_equal_value: //input[@name='rate[equal_value]']
        buttons:
            back: //button[span='Back']
            reset: //button[span='Reset']
            save: //button[span='Save']
            delete: //button[span='Delete']
        messages:
            positive_rate: //li[normalize-space(@class)='error-msg' and contains(.,'Please enter a positive integer number in the left rate field.')]
            confirmation_for_delete: Are you sure you want to do this?

#Edit Reward page
edit_reward_rate:
    mca: reward_rate/edit/rate_id/%id%/
    title: '#%id% / Reward Exchange Rates / Customers / Magento Admin'
    uimap: *newRateUimap
