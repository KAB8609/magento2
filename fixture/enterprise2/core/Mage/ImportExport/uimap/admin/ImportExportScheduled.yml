# Magento
#
# {license_notice}
#
# @category    Magento
# @package     Mage_ImportExport
# @subpackage  functional_tests
# @copyright   {copyright}
# @license     {license_link}
#
---
# Manage Scheduled Import/Export page

scheduled_import_export:
    mca: scheduled_operation/
    click_xpath: //div[@class='nav-bar']//a[span='Scheduled Import/Export']
    title: Scheduled Imports/Exports / Magento Admin
    uimap: &scheduledImportExport
        form:
            fieldsets:
                -
                    grid_and_filter:
                        xpath: //div[@id='operationGrid']
                        buttons:
                            reset_filter: //button[span='Reset Filter']
                            search: //button[span='Search']
                            submit: //button[span='Submit']
                        fields:
                            name: //input[@id='operationGrid_filter_name']
                            grid: //table[@id='operationGrid_table']
                        dropdowns:
                            operation: //select[@id='operationGrid_filter_operation_type']
                            entity_type: //select[@id='operationGrid_filter_entity_type']
                            entity_subtype: //select[@id='operationGrid_filter_entity_subtype']
                            frequency: //select[@id='operationGrid_filter_freq']
                            status: //select[@id='operationGrid_filter_status']
                            last_outcome: //select[@id='operationGrid_filter_is_success']
                            action: //tr[td[2][normalize-space(text())='%attr_code%']]//select[@class = 'action-select']
                            grid_massaction_select: //select[@id='operationGrid_massaction-select']
                        pageelements:
                            scheduled_grid_head: //thead/tr[@class='headings']
        buttons:
            add_scheduled_import: //button[span='Add Scheduled Import']
            add_scheduled_export: //button[span='Add Scheduled Export']
        messages:
            success_saved_export:  //li[normalize-space(@class)='success-msg' and contains(.,'The scheduled export has been saved.')]
            success_saved_import:  //li[normalize-space(@class)='success-msg' and contains(.,'The scheduled import has been saved.')]
            success_delete_export: //li[normalize-space(@class)='success-msg' and contains(.,'The scheduled export has been deleted.')]
            success_delete_import: //li[normalize-space(@class)='success-msg' and contains(.,'The scheduled import has been deleted.')]
            success_run: //li[normalize-space(@class)='success-msg' and contains(.,'Operation has been successfully run')]
            error_run: //li[normalize-space(@class)='error-msg' and contains(.,'Unable to run operation')]

#scheduled_import_export_index:
#    mca: scheduled_operation/
#    click_xpath: //div[@class='nav-bar']//a[span='Scheduled Import/Export']
#    title: Scheduled Imports/Exports / Magento Admin
#    uimap: &scheduledImportExport

scheduled_importexport_add:
    mca: scheduled_operation/new/type/%type%/
    title: New Scheduled %type% / Scheduled Imports/Exports / Magento Admin
    uimap: &createImportExport
        form:
            fieldsets:
                -
                    settings:
                        xpath: //div[@id="operation_settings"]
                        fields:
                            name: //input[@id='name']
                            description: //textarea[@id='details']
                        dropdowns:
                            entity_type: //select[@id='entity']
                            entity_subtype: //select[@id='entity_subtype']
                            file_format_version: //select[@id='file_format_version']
                            behavior: //select[@name='behavior' and not(ancestor::tr[contains(@style,'display: none')])]
                            file_format: //select[@id='file_format']
                            start_time_hours: //input[@id='start_time']/following-sibling::select[1]
                            start_time_minutes: //input[@id='start_time']/following-sibling::select[2]
                            start_time_seconds: //input[@id='start_time']/following-sibling::select[3]
                            frequency: //select[@id='freq']
                            force_import: //select[@id='force_import']
                            status: //select[@id='status']
                -
                    information:
                        xpath: //div[@id='file_settings']
                        fields:
                            file_path: //input[@id='file_path']
                            file_name: //input[@id='file_name']
                            host:  //input[@id='host' and not(ancestor::tr[contains(@style,'display: none')])]
                            user_name: //input[@id='user' and not(ancestor::tr[contains(@style,'display: none')])]
                            password:  //input[@id='password' and not(ancestor::tr[contains(@style,'display: none')])]
                        dropdowns:
                            server_type:  //select[@id='server_type']
                            file_mode:    //select[@id='file_mode' and not(ancestor::tr[contains(@style,'display: none')])]
                            passive_mode: //select[@id='passive' and not(ancestor::tr[contains(@style,'display: none')])]
                -
                    email_settings:
                        xpath: //div[@id='email_settings']
                        fields:
                            email_copy: //input[@id='email_copy']
                        dropdowns:
                            email_receiver:    //select[@id='email_receiver']
                            email_sender:      //select[@id='email_sender']
                            email_template:    //select[@id='email_template']
                            email_copy_method: //select[@id='email_copy_method']
                -
                    grid_and_filter:
                        xpath: //div[@id='export_filter_grid_container' and not(ancestor::div[contains(@style,'display: none')])]
                        fields:
                            attribute_label: //table[@id='export_filter_grid_table']//th//input[@id='export_filter_grid_filter_frontend_label']
                            attribute_code: //table[@id='export_filter_grid_table']//th//input[@id='export_filter_grid_filter_attribute_code']
                            date_filter_from: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[@id='export_filter_%attr_code%'][contains(@class, 'input-text-range-date')]
                            date_filter_to: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[@id='export_filter_%attr_code%_to'][contains(@class, 'input-text-range-date')]
                            input_filter: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-export-filter')]
                            text_filter_from: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-range')][1]
                            text_filter_to: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//input[contains(@class, 'input-text-range')][2]
                        buttons:
                            reset_filter: //table[@class='actions']//button[@title='Reset Filter']
                            search: //table[@class='actions']//button[@title='Search']
                        dropdowns:
                            select_filter: //table[@id="export_filter_grid_table"]//tr[td[3][normalize-space(text())='%attr_code%']]//select[contains(@class, 'select-export-filter')]
        buttons:
            back:   //button[span='Back']
            reset:  //button[span='Reset']
            save:   //button[span='Save']
            delete: //button[span='Delete']

scheduled_importexport_edit:
    mca: scheduled_operation/edit/id/%id%/
    title: Edit Scheduled %type% / Scheduled Imports/Exports / Magento Admin
    uimap: *createImportExport

